# ğŸ—ï¸ ç³»çµ±æ¶æ§‹åˆ†ææ–‡ä»¶

> **ç›®çš„**: æ•´ç†å…©å€‹ä¸»è¦äº¤æ˜“ç¨‹å¼çš„æ‰€æœ‰æ¨¡çµ„ä¾è³´å’Œå¹£å®‰ API æ•¸æ“šä¾†æºï¼Œæ–¹ä¾¿æœªä¾†é–‹ç™¼æ™‚å¿«é€Ÿç†è§£ç³»çµ±é‹ä½œ

---

## ğŸ“‹ æ–‡ä»¶æ¦‚è¦½

| ä¸»ç¨‹å¼ | è·¯å¾‘ | è¡Œæ•¸ | åŠŸèƒ½ |
|--------|------|------|------|
| **Paper + Testnet åŸ·è¡Œå™¨** | `scripts/paper_trading_testnet_hybrid.py` | 2489 | æ•´åˆ Paper Trading èˆ‡ Testnet çœŸé‡‘äº¤æ˜“ |
| **AI äº¤æ˜“é¡§å•** | `scripts/ai_trading_advisor_gpt.py` | 2356 | LLM æ±ºç­–ç³»çµ±ï¼Œè®€å–å¸‚å ´æ•¸æ“šè¼¸å‡ºäº¤æ˜“æŒ‡ä»¤ |

---

## ğŸ”— ç¨‹å¼ä¾è³´é—œä¿‚åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        paper_trading_testnet_hybrid.py                       â”‚
â”‚                           (ä¸»åŸ·è¡Œç¨‹å¼ - å…¥å£é»)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                          â”‚                          â”‚
          â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ paper_trading_      â”‚  â”‚ testnet_            â”‚  â”‚ testnet_websocket_      â”‚
â”‚ hybrid_full.py      â”‚  â”‚ executor.py         â”‚  â”‚ integration.py          â”‚
â”‚ (7671 è¡Œ)           â”‚  â”‚ (1898 è¡Œ)           â”‚  â”‚                         â”‚
â”‚ æ ¸å¿ƒäº¤æ˜“é‚è¼¯        â”‚  â”‚ Testnet çœŸé‡‘åŸ·è¡Œ    â”‚  â”‚ WebSocket å³æ™‚å‡ºå ´      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ (imports 14 å€‹ src æ¨¡çµ„)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              src/ æ¨¡çµ„å±¤                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ strategy/          â”‚ exchange/           â”‚ utils/             â”‚ metrics/    â”‚
â”‚ - hybrid_multi_modeâ”‚ - obi_calculator    â”‚ - consolidation_   â”‚ - leverage_ â”‚
â”‚ - signal_generator â”‚ - vpin_calculator   â”‚   detector         â”‚   pressure  â”‚
â”‚ - mode_config_mgr  â”‚ - spread_depth_     â”‚ - market_regime_   â”‚ - liquidationâ”‚
â”‚ - rule_engine      â”‚   monitor           â”‚   detector         â”‚   _cascade   â”‚
â”‚                    â”‚ - signed_volume_    â”‚ - cost_aware_filterâ”‚              â”‚
â”‚                    â”‚   tracker           â”‚                    â”‚              â”‚
â”‚                    â”‚ - maker_order_mgr   â”‚                    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ai_trading_advisor_gpt.py                             â”‚
â”‚                         (AI æ±ºç­–ç³»çµ± - ç¨ç«‹é‹è¡Œ)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                          â”‚                          â”‚
          â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bridge Files        â”‚  â”‚ LLM Clients         â”‚  â”‚ Data Files              â”‚
â”‚ ai_wolf_bridge.json â”‚  â”‚ - OpenAI            â”‚  â”‚ - signal_diagnostics.csvâ”‚
â”‚ ai_dragon_bridge.jsonâ”‚ â”‚ - Ollama (DeepSeek) â”‚  â”‚ - whale_flip_analysis   â”‚
â”‚ ai_dragon2_bridge   â”‚  â”‚ - Kimi              â”‚  â”‚ - trading_data.json     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒŠ å¹£å®‰ API æ•¸æ“šæµå‘åœ–

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              BINANCE API LAYER                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚                    ğŸ”´ WebSocket å³æ™‚ä¸²æµ (æ¯«ç§’ç´š)                        â”‚  â•‘
â•‘  â”‚         wss://fstream.binance.com/stream?streams=...                    â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                     â”‚                                         â•‘
â•‘       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘       â”‚                             â”‚                             â”‚           â•‘
â•‘       â–¼                             â–¼                             â–¼           â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘  â”‚ bookTicker  â”‚            â”‚ depth20@100msâ”‚            â”‚  aggTrade    â”‚      â•‘
â•‘  â”‚ æœ€ä½³è²·è³£åƒ¹  â”‚            â”‚ è¨‚å–®ç°¿æ·±åº¦    â”‚            â”‚ èšåˆæˆäº¤     â”‚      â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘        â”‚                           â”‚                           â”‚              â•‘
â•‘        â”‚ bidPrice                  â”‚ bids[20]                  â”‚ price        â•‘
â•‘        â”‚ bidQty                    â”‚ asks[20]                  â”‚ qty          â•‘
â•‘        â”‚ askPrice                  â”‚ (å‰20æª”æ›å–®)              â”‚ isBuyerMaker â•‘
â•‘        â”‚ askQty                    â”‚                           â”‚ time         â•‘
â•‘        â”‚                           â”‚                           â”‚              â•‘
â•‘        â–¼                           â–¼                           â–¼              â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘  â”‚SpreadDepth  â”‚            â”‚OBICalculator â”‚            â”‚VPINCalculatorâ”‚      â•‘
â•‘  â”‚Monitor      â”‚            â”‚è¨‚å–®ç°¿ä¸å¹³è¡¡   â”‚            â”‚æˆäº¤é‡æ¯’æ€§     â”‚      â•‘
â•‘  â”‚             â”‚            â”‚              â”‚            â”‚              â”‚      â•‘
â•‘  â”‚â†’spread_bps  â”‚            â”‚â†’obi_value    â”‚            â”‚â†’vpin (0~1)   â”‚      â•‘
â•‘  â”‚â†’depth_imbal â”‚            â”‚ (-1~1)       â”‚            â”‚              â”‚      â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘        â”‚                           â”‚                           â”‚              â•‘
â•‘        â”‚                           â”‚                           â–¼              â•‘
â•‘        â”‚                           â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘        â”‚                           â”‚                    â”‚SignedVolume  â”‚      â•‘
â•‘        â”‚                           â”‚                    â”‚Tracker       â”‚      â•‘
â•‘        â”‚                           â”‚                    â”‚â†’signed_vol   â”‚      â•‘
â•‘        â”‚                           â”‚                    â”‚â†’buy_ratio    â”‚      â•‘
â•‘        â”‚                           â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘        â”‚                           â”‚                           â”‚              â•‘
â•‘        â”‚                           â–¼                           â”‚              â•‘
â•‘        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚              â•‘
â•‘        â”‚                    â”‚ğŸ‹ é¯¨é­šåµæ¸¬å™¨ â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â•‘
â•‘        â”‚                    â”‚(å¤§å–®ç›£æ§)    â”‚                                  â•‘
â•‘        â”‚                    â”‚â†’whale_dir    â”‚                                  â•‘
â•‘        â”‚                    â”‚â†’whale_dom    â”‚                                  â•‘
â•‘        â”‚                    â”‚â†’reversal_prc â”‚                                  â•‘
â•‘        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â•‘
â•‘        â”‚                           â”‚                                          â•‘
â•‘        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘                                    â”‚                                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚                    ğŸ”µ REST API å®šæœŸè¼ªè©¢ (æ¯åˆ†é˜)                         â”‚  â•‘
â•‘  â”‚              https://fapi.binance.com/futures/data/...                  â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                     â”‚                                         â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â•‘
â•‘    â”‚            â”‚            â”‚             â”‚            â”‚            â”‚        â•‘
â•‘    â–¼            â–¼            â–¼             â–¼            â–¼            â–¼        â•‘
â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘ â”‚global  â”‚ â”‚top     â”‚ â”‚openInter-â”‚ â”‚funding   â”‚ â”‚force   â”‚ â”‚takerLong â”‚      â•‘
â•‘ â”‚LongShrtâ”‚ â”‚LongShrtâ”‚ â”‚estHist   â”‚ â”‚Rate      â”‚ â”‚Orders  â”‚ â”‚ShortRatioâ”‚      â•‘
â•‘ â”‚Ratio   â”‚ â”‚Ratio   â”‚ â”‚          â”‚ â”‚          â”‚ â”‚        â”‚ â”‚          â”‚      â•‘
â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘     â”‚           â”‚           â”‚            â”‚           â”‚           â”‚           â•‘
â•‘     â”‚           â”‚           â”‚            â”‚           â”‚           â”‚           â•‘
â•‘     â–¼           â–¼           â–¼            â–¼           â–¼           â–¼           â•‘
â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘ â”‚æ•£æˆ¶æƒ…ç·’â”‚ â”‚å¤§æˆ¶å‚¾å‘â”‚ â”‚OIè¶¨å‹¢    â”‚ â”‚å¤šç©ºæˆæœ¬  â”‚ â”‚æ¸…ç®—æµ  â”‚ â”‚ä¸»å‹•è²·è³£  â”‚      â•‘
â•‘ â”‚longShrtâ”‚ â”‚longShrtâ”‚ â”‚sumOI     â”‚ â”‚fundRate  â”‚ â”‚price   â”‚ â”‚buySellRatâ”‚      â•‘
â•‘ â”‚Ratio   â”‚ â”‚Ratio   â”‚ â”‚sumOIVal  â”‚ â”‚fundTime  â”‚ â”‚origQty â”‚ â”‚buyVol    â”‚      â•‘
â•‘ â”‚        â”‚ â”‚        â”‚ â”‚          â”‚ â”‚          â”‚ â”‚side    â”‚ â”‚sellVol   â”‚      â•‘
â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘     â”‚           â”‚           â”‚            â”‚           â”‚           â”‚           â•‘
â•‘     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                   â”‚                                          â•‘
â•‘                                   â–¼                                          â•‘
â•‘                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â•‘
â•‘                         â”‚LiquidationCascadeâ”‚                                 â•‘
â•‘                         â”‚Detector          â”‚                                 â•‘
â•‘                         â”‚â†’cascade_risk     â”‚                                 â•‘
â•‘                         â”‚â†’pressure_level   â”‚                                 â•‘
â•‘                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â•‘
â•‘                                   â”‚                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
                                    â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            INDICATOR LAYER (æŒ‡æ¨™å±¤)                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘   â”‚                        åŒ¯ç¸½æ‰€æœ‰æŒ‡æ¨™æ•¸æ“š                               â”‚    â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘   â”‚  whale_status:           â”‚  market_microstructure:                   â”‚    â•‘
â•‘   â”‚  â”œâ”€ whale_dominance      â”‚  â”œâ”€ obi (-1 ~ 1)                          â”‚    â•‘
â•‘   â”‚  â”œâ”€ whale_direction      â”‚  â”œâ”€ vpin (0 ~ 1)                          â”‚    â•‘
â•‘   â”‚  â”œâ”€ whale_reversal_price â”‚  â”œâ”€ spread_bps                            â”‚    â•‘
â•‘   â”‚  â””â”€ whale_trap_prob      â”‚  â”œâ”€ funding_rate                          â”‚    â•‘
â•‘   â”‚                          â”‚  â””â”€ depth_imbalance                       â”‚    â•‘
â•‘   â”‚  volatility:             â”‚  risk_indicators:                         â”‚    â•‘
â•‘   â”‚  â”œâ”€ atr_pct              â”‚  â”œâ”€ liquidation_pressure                  â”‚    â•‘
â•‘   â”‚  â””â”€ volatility_regime    â”‚  â”œâ”€ cascade_risk                          â”‚    â•‘
â•‘   â”‚                          â”‚  â””â”€ market_regime                         â”‚    â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                    â”‚                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     â”‚
                                     â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            BRIDGE LAYER (æ©‹æ¥å±¤)                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â•‘
â•‘   â”‚  ai_wolf_bridge.jsonâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ai_trading_advisor_  â”‚                     â•‘
â•‘   â”‚  ai_dragon_bridge   â”‚         â”‚gpt.py (AI æ±ºç­–)     â”‚                     â•‘
â•‘   â”‚  ai_dragon2_bridge  â”‚         â”‚                     â”‚                     â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â•‘
â•‘   â”‚  wolf_to_ai: {      â”‚  â”€â”€â”€â”€â–º  â”‚ è®€å–å¸‚å ´æ•¸æ“š        â”‚                     â•‘
â•‘   â”‚    æ‰€æœ‰æŒ‡æ¨™æ•¸æ“š     â”‚         â”‚ æ§‹å»º LLM Prompt     â”‚                     â•‘
â•‘   â”‚  }                  â”‚         â”‚ èª¿ç”¨ DeepSeek       â”‚                     â•‘
â•‘   â”‚                     â”‚         â”‚                     â”‚                     â•‘
â•‘   â”‚  ai_to_wolf: {      â”‚  â—„â”€â”€â”€â”€  â”‚ è¼¸å‡º:               â”‚                     â•‘
â•‘   â”‚    action           â”‚         â”‚ LONG/SHORT/HOLD     â”‚                     â•‘
â•‘   â”‚    confidence       â”‚         â”‚ CUT_LOSS            â”‚                     â•‘
â•‘   â”‚    leverage         â”‚         â”‚                     â”‚                     â•‘
â•‘   â”‚    take_profit_pct  â”‚         â”‚                     â”‚                     â•‘
â•‘   â”‚    stop_loss_pct    â”‚         â”‚                     â”‚                     â•‘
â•‘   â”‚  }                  â”‚         â”‚                     â”‚                     â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     â”‚
                                     â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           EXECUTION LAYER (åŸ·è¡Œå±¤)                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   paper_trading_hybrid_full.py                                                â•‘
â•‘   â”œâ”€ è®€å– ai_to_wolf æ±ºç­–                                                     â•‘
â•‘   â”œâ”€ ä¸‰é‡ç¢ºèªæ©Ÿåˆ¶ (AI + é¯¨é­š + OBI)                                           â•‘
â•‘   â”œâ”€ ç¡¬æŒ‡æ¨™ä¿éšªçµ²æª¢æŸ¥                                                         â•‘
â•‘   â””â”€ åŸ·è¡Œäº¤æ˜“ â†’ Paper Trading / Testnet                                       â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### ğŸ“Š API æ•¸æ“šç”¨é€”é€ŸæŸ¥è¡¨

| API ä¾†æº | æ•¸æ“š | æµå‘æ¨¡çµ„ | æœ€çµ‚æŒ‡æ¨™ | ç”¨é€” |
|----------|------|----------|----------|------|
| `bookTicker` | bidPrice, askPrice | SpreadDepthMonitor | spread_bps | åƒ¹å·®ç›£æ§ï¼Œåˆ¤æ–·æµå‹•æ€§ |
| `depth20@100ms` | bids[], asks[] | OBICalculator | obi_value | è¨‚å–®ç°¿å£“åŠ›ï¼Œé æ¸¬çŸ­æœŸæ–¹å‘ |
| `depth20@100ms` | å¤§å–®æ›å–® | WhaleDetector | whale_direction | é¯¨é­šæ–¹å‘åµæ¸¬ |
| `aggTrade` | price, qty | VPINCalculator | vpin | æ¯’æ€§æµå‹•ï¼Œé¢¨éšªéæ¿¾ |
| `aggTrade` | isBuyerMaker | SignedVolumeTracker | buy_ratio | ä¸»å‹•è²·è³£åŠ›é“ |
| `aggTrade` | å¤§å–®æˆäº¤ | WhaleDetector | whale_dominance | é¯¨é­šé›†ä¸­åº¦ |
| `globalLongShortRatio` | longShortRatio | LeveragePressure | æ•£æˆ¶æƒ…ç·’ | åå‘æŒ‡æ¨™åƒè€ƒ |
| `topLongShortRatio` | longShortRatio | LeveragePressure | å¤§æˆ¶å‚¾å‘ | è·Ÿéš¨å¤§æˆ¶æ–¹å‘ |
| `openInterestHist` | sumOI | LeveragePressure | OI è¶¨å‹¢ | è³‡é‡‘æµå…¥/æµå‡º |
| `fundingRate` | fundingRate | ç›´æ¥ä½¿ç”¨ | funding_rate | å¤šç©ºæˆæœ¬ï¼Œæ¥µç«¯å€¼è­¦å‘Š |
| `forceOrders` | price, side | LiquidationCascade | cascade_risk | é€£é–æ¸…ç®—é¢¨éšª |
| `takerLongShortRatio` | buyVol, sellVol | LeveragePressure | ä¸»å‹•è²·è³£æ¯” | å¸‚å ´å‹•èƒ½æ–¹å‘ |

## ğŸ”— åŸ·è¡Œ/è³‡æ–™æµæ¦‚è¦½ï¼ˆåˆ†å±¤ç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     scripts/paper_trading_testnet_hybrid.py                  â”‚
â”‚                           (ä¸»åŸ·è¡Œç¨‹å¼ / å…¥å£é»)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                        â”‚                        â”‚
             â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ paper_trading_       â”‚  â”‚ testnet_executor.py  â”‚  â”‚ testnet_websocket_    â”‚
â”‚ hybrid_full.py       â”‚  â”‚ (REST/æŸ¥è©¢/ä¸‹å–®)     â”‚  â”‚ integration.py (WS)   â”‚
â”‚ (Paper ä¸»æµç¨‹)       â”‚  â”‚                      â”‚  â”‚ (å¯é¸)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ imports äº¤æ˜“/æŒ‡æ¨™ç­‰ src æ¨¡çµ„
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  src æ¨¡çµ„å±¤                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ strategy/         exchange/             utils/              metrics/          â”‚
â”‚ - hybrid_multi    - obi_calculator      - consolidation_    - leverage_      â”‚
â”‚ - signal_generator- vpin_calculator       detector           pressure        â”‚
â”‚ - mode_config_mgr - spread_depth_monitor - market_regime_   - liquidation_   â”‚
â”‚ - rule_engine     - signed_volume_tracker  detector           cascade         â”‚
â”‚                   - maker_order_mgr      - cost_aware_filter                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Binance Testnet REST/WS                                                      â”‚
â”‚ - REST: ä¸‹å–®/æ’¤å–®ã€å¸³æˆ¶/æŒå€‰ã€è¡Œæƒ…/æ·±åº¦ã€æ§“æ¡¿/æ¨¡å¼                           â”‚
â”‚ - WS : user data(æˆäº¤/æŒå€‰)ã€mark price(1s)ã€forceOrder(çˆ†å€‰ç€‘å¸ƒ)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¼¸å‡º / ç‹€æ…‹                                                                  â”‚
â”‚ - logs/trading_terminal/trading_*.log                                        â”‚
â”‚ - data/paper_trading/pt_*/trading_data.json / trading.log                    â”‚
â”‚ - testnet_portfolio.json / ai_wolf_bridge.json (æ©‹æ¥å›é¥‹)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        scripts/ai_trading_advisor_gpt.py                     â”‚
â”‚                           (AI é¡§å• / ç¨ç«‹è¿´åœˆ)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                        â”‚                        â”‚
             â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‹€æ…‹/è¨˜æ†¶ JSON       â”‚  â”‚ LLM Clients          â”‚  â”‚ å¸‚å ´å¿«ç…§ / è³‡æ–™       â”‚
â”‚ ai_advisor_state     â”‚  â”‚ OpenAI / Kimi /      â”‚  â”‚ liquidation_pressure/ â”‚
â”‚ ai_strategy_plan     â”‚  â”‚ Ollama (DeepSeek)    â”‚  â”‚ latest_snapshot.json  â”‚
â”‚ ai_learning_memory   â”‚  â”‚                      â”‚  â”‚ trading_data.json ç­‰  â”‚
â”‚ ai_market_memory     â”‚  â”‚                      â”‚  â”‚ signal_diagnostics... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ©‹æ¥æª” (é›™å‘)                                                                â”‚
â”‚ - ai_wolf_bridge.json (AI æŒ‡ä»¤ â†’ äº¤æ˜“ / äº¤æ˜“å›é¥‹ â†’ AI)                      â”‚
â”‚ - å…¶ä»– *_bridge.json (å¦‚å•Ÿç”¨å¤š AI)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI è¼¸å‡º / æ—¥èªŒ                                                               â”‚
â”‚ - logs/ai_terminal/ai_advisor_*.log                                          â”‚
â”‚ - æ›´æ–°æ©‹æ¥æª”ä¸­çš„æ–¹å‘/æ§“æ¡¿/TP/SL/å€‰ä½å»ºè­°ï¼Œå¥åº·åˆ†/æ±ºç­–ç†ç”±                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ“ ç¬¬ä¸€éƒ¨åˆ†ï¼špaper_trading_testnet_hybrid.py

### 1.1 ç›´æ¥ä¾è³´ (scripts/)

| æ¨¡çµ„ | é¡åˆ¥ | åŠŸèƒ½èªªæ˜ |
|------|------|----------|
| `paper_trading_hybrid_full.py` | `HybridPaperTradingSystem`, `TradingMode` | æ ¸å¿ƒäº¤æ˜“ç³»çµ±ï¼ŒåŒ…å«æ‰€æœ‰ç­–ç•¥é‚è¼¯ |
| `testnet_executor.py` | `BinanceTestnetExecutor`, `PaperToTestnetBridge` | Testnet çœŸé‡‘ä¸‹å–®åŸ·è¡Œ |
| `testnet_websocket_integration.py` | `WebSocketIntegration` | WebSocket å³æ™‚ç›£æ§å‡ºå ´ |

### 1.2 ä¸»è¦åŠŸèƒ½

```python
class TestnetHybridSystem:
    """æ•´åˆ Paper Trading èˆ‡ Testnet çš„æ··åˆç³»çµ±"""
    
    def __init__(self, paper_strategies, testnet_strategies):
        # paper_strategies: ['wolf'] â†’ åªè·‘ Paper
        # testnet_strategies: ['wolf'] â†’ åŒæ™‚è·‘ Testnet çœŸé‡‘
        
    async def run_unified_mode(self):
        # MğŸº = TğŸº çµ±ä¸€æ¨¡å¼: Paper ä¿¡è™Ÿç›´æ¥åŒæ­¥åˆ° Testnet
        
    def on_websocket_exit(self, signal_type, price):
        # WebSocket å³æ™‚å‡ºå ´ (æ­¢ç›ˆ/æ­¢æ/æ‹–æ›³åœåˆ©)
```

### 1.3 TeeLogger æ—¥èªŒç³»çµ±

```python
class TeeLogger:
    """åŒæ™‚è¼¸å‡ºåˆ° console å’Œ log æª”æ¡ˆ"""
    def __init__(self, log_file="logs/paper_trading_xxxx.log"):
        self.terminal = sys.stdout
        self.log = open(log_file, "w")
```

---

## ğŸ“ ç¬¬äºŒéƒ¨åˆ†ï¼špaper_trading_hybrid_full.py (æ ¸å¿ƒå¼•æ“)

### 2.1 src æ¨¡çµ„å®Œæ•´åˆ—è¡¨ (14 å€‹)

```python
# === ç­–ç•¥æ¨¡çµ„ ===
from src.strategy.hybrid_multi_mode import MultiModeHybridStrategy, TradingMode
from src.strategy.signal_generator import SignalGenerator
from src.strategy.mode_config_manager import ModeConfigManager
from src.strategy.rule_engine import RuleEngine

# === äº¤æ˜“æ‰€æŒ‡æ¨™æ¨¡çµ„ ===
from src.exchange.obi_calculator import OBICalculator              # è¨‚å–®ç°¿ä¸å¹³è¡¡
from src.exchange.signed_volume_tracker import SignedVolumeTracker # å¸¶ç¬¦è™Ÿæˆäº¤é‡
from src.exchange.vpin_calculator import VPINCalculator            # æˆäº¤é‡æ¯’æ€§
from src.exchange.spread_depth_monitor import SpreadDepthMonitor   # åƒ¹å·®æ·±åº¦ç›£æ§
from src.exchange.maker_order_manager import MakerOrderManager     # Maker æ›å–®ç®¡ç†

# === å·¥å…·æ¨¡çµ„ ===
from src.utils.consolidation_detector import ConsolidationDetector # ç›¤æ•´åµæ¸¬
from src.utils.market_regime_detector import MarketRegimeDetector, MarketRegime
from src.utils.cost_aware_filter import CostAwareFilter, CostDecision

# === é¢¨éšªæŒ‡æ¨™æ¨¡çµ„ ===
from src.metrics.leverage_pressure import LiquidationPressureSnapshot, PressureLevel
from src.metrics.liquidation_cascade_detector import LiquidationCascadeDetector, CascadeAlert
```

### 2.2 å„æ¨¡çµ„è©³ç´°èªªæ˜

| æ¨¡çµ„ | è·¯å¾‘ | åŠŸèƒ½ | è¼¸å‡ºæ•¸æ“š |
|------|------|------|----------|
| **OBICalculator** | `src/exchange/obi_calculator.py` | è¨‚å–®ç°¿ä¸å¹³è¡¡è¨ˆç®— | `obi_value` (-1.0 ~ 1.0) |
| **VPINCalculator** | `src/exchange/vpin_calculator.py` | Volume-Synchronized PINï¼Œåµæ¸¬æ¯’æ€§æµå‹• | `vpin` (0.0 ~ 1.0) |
| **SignedVolumeTracker** | `src/exchange/signed_volume_tracker.py` | è¿½è¹¤è²·è³£æ–¹å‘æˆäº¤é‡ | `signed_volume`, `buy_ratio` |
| **SpreadDepthMonitor** | `src/exchange/spread_depth_monitor.py` | ç›£æ§ Bid-Ask åƒ¹å·®å’Œæ·±åº¦ | `spread_bps`, `depth_imbalance` |
| **MakerOrderManager** | `src/exchange/maker_order_manager.py` | Maker é™åƒ¹å–®ç®¡ç† | è¨‚å–®ç‹€æ…‹ |
| **ConsolidationDetector** | `src/utils/consolidation_detector.py` | åµæ¸¬ç›¤æ•´å€é–“ | `is_consolidating`, `range_pct` |
| **MarketRegimeDetector** | `src/utils/market_regime_detector.py` | å¸‚å ´ç‹€æ…‹åˆ†é¡ | `TRENDING`, `RANGING`, `VOLATILE` |
| **CostAwareFilter** | `src/utils/cost_aware_filter.py` | è€ƒæ…®æ‰‹çºŒè²»çš„äº¤æ˜“æ±ºç­– | `CostDecision` |
| **LiquidationPressureSnapshot** | `src/metrics/leverage_pressure.py` | æ¸…ç®—å£“åŠ›å¿«ç…§ | `pressure_level` |
| **LiquidationCascadeDetector** | `src/metrics/liquidation_cascade_detector.py` | é€£é–æ¸…ç®—åµæ¸¬ | `CascadeAlert` |
| **SignalGenerator** | `src/strategy/signal_generator.py` | ä¿¡è™Ÿç”¢ç”Ÿå™¨ | `signal`, `confidence` |
| **RuleEngine** | `src/strategy/rule_engine.py` | è¦å‰‡å¼•æ“ | äº¤æ˜“è¦å‰‡é©—è­‰ |
| **ModeConfigManager** | `src/strategy/mode_config_manager.py` | æ¨¡å¼é…ç½®ç®¡ç† | ç­–ç•¥åƒæ•¸ |
| **MultiModeHybridStrategy** | `src/strategy/hybrid_multi_mode.py` | å¤šæ¨¡å¼æ··åˆç­–ç•¥ | äº¤æ˜“æ±ºç­– |

### 2.3 ccxt äº¤æ˜“æ‰€é€£æ¥

```python
import ccxt

# åˆå§‹åŒ– Binance Futures
exchange = ccxt.binance({
    'apiKey': API_KEY,
    'secret': API_SECRET,
    'enableRateLimit': True,
    'options': {
        'defaultType': 'future',     # æ°¸çºŒåˆç´„
        'adjustForTimeDifference': True,
    }
})
```

---

## ğŸŒ ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¹£å®‰ API æ•¸æ“šä¾†æº

### 3.1 WebSocket å³æ™‚æ•¸æ“šæµ

```python
# WebSocket URL
WEBSOCKET_URL = "wss://fstream.binance.com/stream?streams=btcusdt@bookTicker/btcusdt@depth20@100ms/btcusdt@aggTrade"
```

| Stream | ç”¨é€” | æ•¸æ“šå…§å®¹ | æ›´æ–°é »ç‡ |
|--------|------|----------|----------|
| `btcusdt@bookTicker` | æœ€ä½³è²·è³£åƒ¹ | `bidPrice`, `bidQty`, `askPrice`, `askQty` | å³æ™‚ |
| `btcusdt@depth20@100ms` | è¨‚å–®ç°¿æ·±åº¦ | å‰ 20 æª”è²·è³£ç›¤ | 100ms |
| `btcusdt@aggTrade` | èšåˆæˆäº¤ | `price`, `qty`, `isBuyerMaker`, `time` | å³æ™‚ |

#### WebSocket æ•¸æ“šç”¨é€”å°æ‡‰

```
btcusdt@bookTicker â†’ SpreadDepthMonitor (åƒ¹å·®ç›£æ§)
                   â†’ å³æ™‚å ±åƒ¹é¡¯ç¤º

btcusdt@depth20@100ms â†’ OBICalculator (è¨‚å–®ç°¿ä¸å¹³è¡¡)
                      â†’ é¯¨é­šåµæ¸¬ (å¤§å–®ç›£æ§)

btcusdt@aggTrade â†’ VPINCalculator (æˆäº¤é‡æ¯’æ€§)
                 â†’ SignedVolumeTracker (è²·è³£æ–¹å‘)
                 â†’ é¯¨é­šåµæ¸¬ (å¤§å–®æˆäº¤)
```

### 3.2 REST API æ•¸æ“šç«¯é»

#### ä¾†æº: `scripts/fetch_binance_leverage_data.py`

| # | ç«¯é» | åŠŸèƒ½ | æ•¸æ“šå­—æ®µ | ç”¨é€” |
|---|------|------|----------|------|
| 1 | `/futures/data/globalLongShortAccountRatio` | å…¨å¸‚å ´å¤šç©ºæ¯” | `longShortRatio`, `longAccount`, `shortAccount` | æ•£æˆ¶æƒ…ç·’ |
| 2 | `/futures/data/topLongShortAccountRatio` | å¤§æˆ¶å¤šç©ºæ¯”(å¸³æˆ¶) | `longShortRatio`, `longAccount`, `shortAccount` | å¤§æˆ¶å‚¾å‘ |
| 3 | `/futures/data/topLongShortPositionRatio` | å¤§æˆ¶å¤šç©ºæ¯”(æŒå€‰) | `longShortRatio`, `longPosition`, `shortPosition` | å¤§æˆ¶å¯¦éš›æŒå€‰ |
| 4 | `/futures/data/openInterestHist` | æœªå¹³å€‰é‡æ­·å² | `sumOpenInterest`, `sumOpenInterestValue` | OI è¶¨å‹¢ |
| 5 | `/fapi/v1/fundingRate` | è³‡é‡‘è²»ç‡ | `fundingRate`, `fundingTime` | å¤šç©ºæˆæœ¬ |
| 6 | `/fapi/v1/forceOrders` | å¼·åˆ¶æ¸…ç®—è¨‚å–® | `price`, `origQty`, `side`, `time` | æ¸…ç®—æµ |
| 7 | `/futures/data/takerlongshortRatio` | Taker è²·è³£æ¯” | `buySellRatio`, `buyVol`, `sellVol` | ä¸»å‹•è²·è³£åŠ›é“ |

#### API èª¿ç”¨ç¯„ä¾‹

```python
class BinanceLeverageDataFetcher:
    BASE_URL = "https://fapi.binance.com"
    
    def fetch_global_long_short_ratio(self, symbol="BTCUSDT", period="5m", limit=1):
        """ç²å–å…¨å¸‚å ´å¤šç©ºå¸³æˆ¶æ¯”"""
        endpoint = "/futures/data/globalLongShortAccountRatio"
        params = {"symbol": symbol, "period": period, "limit": limit}
        return self._request(endpoint, params)
    
    def fetch_force_orders(self, symbol="BTCUSDT", limit=100):
        """ç²å–æœ€è¿‘æ¸…ç®—è¨‚å–®"""
        endpoint = "/fapi/v1/forceOrders"
        params = {"symbol": symbol, "limit": limit}
        return self._request(endpoint, params)
```

### 3.3 æ•¸æ“šæµå‘åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Binance API Layer                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  WebSocket (å³æ™‚)                    â”‚  REST API (å®šæœŸ)                  â”‚
â”‚  â”œâ”€ bookTicker (æœ€ä½³è²·è³£åƒ¹)          â”‚  â”œâ”€ globalLongShortRatio (1m)    â”‚
â”‚  â”œâ”€ depth20@100ms (è¨‚å–®ç°¿)           â”‚  â”œâ”€ topLongShortAccountRatio     â”‚
â”‚  â””â”€ aggTrade (æˆäº¤)                  â”‚  â”œâ”€ openInterestHist             â”‚
â”‚                                      â”‚  â”œâ”€ fundingRate                  â”‚
â”‚                                      â”‚  â”œâ”€ forceOrders                  â”‚
â”‚                                      â”‚  â””â”€ takerlongshortRatio          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Indicator Layer                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OBICalculator    â”‚ è¨‚å–®ç°¿ä¸å¹³è¡¡ â†’ obi_value                            â”‚
â”‚  VPINCalculator   â”‚ æˆäº¤é‡æ¯’æ€§ â†’ vpin                                   â”‚
â”‚  SpreadDepthMonitorâ”‚ åƒ¹å·®æ·±åº¦ â†’ spread_bps, depth_imbalance             â”‚
â”‚  WhaleDetector    â”‚ é¯¨é­šåµæ¸¬ â†’ whale_direction, whale_dominance         â”‚
â”‚  LiquidationCascadeâ”‚ é€£é–æ¸…ç®— â†’ cascade_risk, pressure_level            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Bridge Layer (JSON)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ai_wolf_bridge.json    â”‚ wolf_to_ai: å¸‚å ´æ•¸æ“š â†’ AI                     â”‚
â”‚                         â”‚ ai_to_wolf: AI æ±ºç­– â†’ äº¤æ˜“ç³»çµ±                â”‚
â”‚  ai_dragon_bridge.json  â”‚ åŒä¸Š (Dragon ç­–ç•¥)                            â”‚
â”‚  ai_dragon2_bridge.json â”‚ åŒä¸Š (Dragon2 ç­–ç•¥)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI Decision Layer (LLM)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ai_trading_advisor_gpt.py                                              â”‚
â”‚  â”œâ”€ è®€å– Bridge æ•¸æ“š                                                    â”‚
â”‚  â”œâ”€ æ§‹å»º Prompt                                                         â”‚
â”‚  â”œâ”€ èª¿ç”¨ LLM (Ollama/OpenAI/Kimi)                                       â”‚
â”‚  â””â”€ è¼¸å‡ºäº¤æ˜“æ±ºç­– (LONG/SHORT/HOLD/CUT_LOSS)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç¬¬å››éƒ¨åˆ†ï¼šai_trading_advisor_gpt.py

### 4.1 é…ç½®æ–‡ä»¶ä¾è³´

| æ–‡ä»¶ | ç”¨é€” | é—œéµå­—æ®µ |
|------|------|----------|
| `ai_wolf_bridge.json` | Wolf ç­–ç•¥é›™å‘é€šè¨Š | `wolf_to_ai`, `ai_to_wolf` |
| `ai_dragon_bridge.json` | Dragon ç­–ç•¥é›™å‘é€šè¨Š | `dragon_to_ai`, `ai_to_dragon` |
| `ai_advisor_state.json` | AI ç‹€æ…‹æŒä¹…åŒ– | `last_prediction`, `consecutive_losses` |
| `ai_strategy_plan.json` | å¤šéšæ®µç­–ç•¥è¨ˆåŠƒ | `phases`, `current_phase` |
| `ai_learning_memory.json` | å­¸ç¿’è¨˜æ†¶ | `success_patterns`, `failure_patterns` |
| `ai_market_memory.json` | å¸‚å ´è¨˜æ†¶ | `regime_history`, `bias_tracking` |
| `ai_profit_config.json` | åˆ©æ½¤é…ç½® | `take_profit`, `stop_loss`, `trailing` |

### 4.2 Bridge æ–‡ä»¶æ•¸æ“šçµæ§‹

#### wolf_to_ai (äº¤æ˜“ç³»çµ± â†’ AI)

```json
{
  "wolf_to_ai": {
    "whale_status": {
      "whale_dominance": 0.85,           // é¯¨é­šé›†ä¸­åº¦ 0-1
      "whale_direction": "LONG",          // é¯¨é­šæ–¹å‘
      "whale_reversal_price": 105000.0,   // é æ¸¬åè½‰åƒ¹
      "whale_trap_probability": 0.15      // é™·é˜±æ¦‚ç‡
    },
    "market_microstructure": {
      "obi": 0.45,                        // è¨‚å–®ç°¿ä¸å¹³è¡¡ -1~1
      "vpin": 0.35,                       // æˆäº¤é‡æ¯’æ€§ 0~1
      "spread_bps": 0.8,                  // åƒ¹å·®åŸºé»
      "funding_rate": 0.0001,             // è³‡é‡‘è²»ç‡
      "depth_imbalance": 0.2              // æ·±åº¦ä¸å¹³è¡¡
    },
    "volatility": {
      "atr_pct": 0.15,                    // ATR ç™¾åˆ†æ¯”
      "volatility_regime": "NORMAL"       // æ³¢å‹•ç‹€æ…‹
    },
    "risk_indicators": {
      "liquidation_pressure": 0.3,        // æ¸…ç®—å£“åŠ›
      "cascade_risk": "LOW",              // é€£é–é¢¨éšª
      "market_regime": "TRENDING"         // å¸‚å ´ç‹€æ…‹
    },
    "whale_signal_effectiveness": {
      "quality_score": 0.75,              // ä¿¡è™Ÿå“è³ª
      "quality_grade": "A"                // å“è³ªç­‰ç´š
    },
    "current_price": 104500.0,
    "position": null,
    "timestamp": "2025-01-20T10:30:00Z"
  }
}
```

#### ai_to_wolf (AI â†’ äº¤æ˜“ç³»çµ±)

```json
{
  "ai_to_wolf": {
    "action": "LONG",                     // LONG/SHORT/HOLD/CUT_LOSS
    "confidence": 78,                     // ä¿¡å¿ƒåº¦ 0-100
    "direction": "BULLISH",               // BULLISH/BEARISH/NEUTRAL
    "reasoning": "å¼·é¯¨é­šä¿¡è™Ÿ+OBIæ”¯æŒ",
    "leverage": 60,                       // å»ºè­°æ§“æ¡¿
    "position_size": 80,                  // å€‰ä½ç™¾åˆ†æ¯”
    "take_profit_pct": 10.0,              // æ­¢ç›ˆç™¾åˆ†æ¯”
    "stop_loss_pct": 3.5,                 // æ­¢æç™¾åˆ†æ¯”
    "trailing_activation": 5.0,           // æ‹–æ›³å•Ÿå‹•
    "trailing_distance": 2.0,             // æ‹–æ›³è·é›¢
    "price_target": 106000.0,             // ç›®æ¨™åƒ¹
    "entry_strategy": "market",           // market/limit
    "max_holding_minutes": 120,           // æœ€å¤§æŒå€‰æ™‚é–“
    "timestamp": "2025-01-20T10:30:05Z"
  }
}
```

### 4.3 SNIPER_CONFIG é…ç½®

```python
SNIPER_CONFIG = {
    'entry_requirements': {
        'min_confidence': 72,          # æœ€ä½ä¿¡å¿ƒåº¦
        'min_confluence': 3,           # æœ€ä½å…±è­˜æ•¸
        'max_vpin': 0.70,              # æœ€å¤§ VPIN (æ¯’æ€§)
        'min_whale_dominance': 0.60,   # æœ€ä½é¯¨é­šé›†ä¸­åº¦
    },
    'risk_filters': {
        'max_spread_bps': 3.0,         # æœ€å¤§åƒ¹å·®
        'max_funding_rate': 0.001,     # æœ€å¤§è³‡é‡‘è²»ç‡
        'banned_regimes': ['EXTREME_VOLATILE'],
    },
    'position_sizing': {
        'base_leverage': 60,           # åŸºç¤æ§“æ¡¿
        'max_leverage': 100,           # æœ€å¤§æ§“æ¡¿
        'confidence_scaling': True,    # ä¿¡å¿ƒåº¦ç¸®æ”¾
    },
    'targets': {
        'default_tp': 10.0,            # é è¨­æ­¢ç›ˆ
        'default_sl': 3.5,             # é è¨­æ­¢æ
        'trailing_activation': 5.0,    # æ‹–æ›³å•Ÿå‹•
        'trailing_distance': 2.0,      # æ‹–æ›³è·é›¢
    }
}
```

### 4.4 LLM å®¢æˆ¶ç«¯æ”¯æŒ

```python
# æ”¯æŒçš„ LLM æä¾›å•†
LLM_PROVIDERS = {
    'ollama': {
        'base_url': 'http://localhost:11434',
        'model': 'deepseek-coder:6.7b',  # æˆ–å…¶ä»–æ¨¡å‹
    },
    'openai': {
        'api_key': 'OPENAI_API_KEY',
        'model': 'gpt-4-turbo-preview',
    },
    'kimi': {
        'api_key': 'KIMI_API_KEY',
        'model': 'moonshot-v1-8k',
    }
}
```

### 4.5 æ•¸æ“šè¼‰å…¥å‡½æ•¸

```python
def load_market_data():
    """è¼‰å…¥æ‰€æœ‰å¸‚å ´æ•¸æ“š"""
    # 1. Bridge æ–‡ä»¶
    bridge_data = load_json('ai_wolf_bridge.json')
    
    # 2. è¨ºæ–·æ•¸æ“š
    diagnostics = pd.read_csv('data/signal_diagnostics.csv')
    
    # 3. é¯¨é­šåˆ†æ
    whale_analysis = pd.read_csv('data/whale_flip_analysis.csv')
    
    # 4. æ­·å²äº¤æ˜“
    trading_data = load_json('data/trading_data.json')
    
    # 5. æœ€æ–°å¿«ç…§
    snapshot = load_json('data/latest_snapshot.json')
    
    return {
        'bridge': bridge_data,
        'diagnostics': diagnostics,
        'whale': whale_analysis,
        'trading': trading_data,
        'snapshot': snapshot
    }
```

---

## ğŸ“ ç¬¬äº”éƒ¨åˆ†ï¼štestnet_executor.py

### 5.1 Testnet é…ç½®

```python
# Binance Testnet URL
TESTNET_BASE_URL = "https://testnet.binancefuture.com"
TESTNET_WS_URL = "wss://stream.binancefuture.com"

# Maker è¨‚å–®é…ç½®
MAKER_CONFIG = {
    'enabled': True,
    'offset_bps': 1.0,           # æ›å–®åç§» (åŸºé»)
    'max_wait_seconds': 30,       # æœ€å¤§ç­‰å¾…æ™‚é–“
    'fallback_to_market': True,   # è¶…æ™‚å¾Œæ”¹å¸‚åƒ¹å–®
}

# ç­–ç•¥é…ç½®
STRATEGY_CONFIG = {
    'wolf': {
        'leverage': 60,
        'position_size_pct': 80,
        'take_profit_pct': 10.0,
        'stop_loss_pct': 3.5,
    }
}
```

### 5.2 ä¸»è¦é¡åˆ¥

```python
class BinanceTestnetExecutor:
    """Testnet çœŸé‡‘ä¸‹å–®åŸ·è¡Œå™¨"""
    
    def __init__(self, api_key, api_secret):
        self.exchange = ccxt.binance({
            'apiKey': api_key,
            'secret': api_secret,
            'options': {'defaultType': 'future'},
            'urls': {'api': TESTNET_BASE_URL}
        })
    
    async def execute_order(self, action, leverage, size_pct):
        """åŸ·è¡ŒçœŸé‡‘è¨‚å–®"""
        
    async def set_take_profit_stop_loss(self, tp_price, sl_price):
        """è¨­ç½®æ­¢ç›ˆæ­¢æ"""

class PaperToTestnetBridge:
    """Paper Trading â†’ Testnet åŒæ­¥æ©‹æ¥"""
    
    def sync_signal(self, paper_signal):
        """å°‡ Paper ä¿¡è™ŸåŒæ­¥åˆ° Testnet"""
```

---

## ğŸ“ ç¬¬å…­éƒ¨åˆ†ï¼šé—œéµç­–ç•¥é‚è¼¯

### 6.1 ä¸‰é‡ç¢ºèªæ©Ÿåˆ¶

```python
# ç­–ç•¥ 2: ä¸‰é‡ç¢ºèªæ©Ÿåˆ¶ (AI + é¯¨é­š + OBI)
ai_agrees = (ai_direction == "BULLISH" and action == "LONG") or \
            (ai_direction == "BEARISH" and action == "SHORT")
whale_agrees = whale_direction == action
obi_agrees = (obi_value > 0.3 and action == "LONG") or \
             (obi_value < -0.3 and action == "SHORT")

confluence_count = sum([ai_agrees, whale_agrees, obi_agrees])
# éœ€è¦è‡³å°‘ 2/3 ä¸€è‡´æ‰äº¤æ˜“
```

### 6.2 ç¡¬æŒ‡æ¨™ä¿éšªçµ²

```python
# ä¿éšªçµ²é…ç½® (hard_fuse)
hard_fuse = {
    'enabled': True,
    'min_whale_dominance': 0.5,    # æœ€ä½é¯¨é­šé›†ä¸­åº¦
    'max_obi_against': 0.5,        # OBI æœ€å¤§åå‘å®¹å¿åº¦
}

# ABSOLUTE RULE #1: é«˜é›†ä¸­åº¦æ™‚å¿…é ˆè·Ÿéš¨é¯¨é­š
if whale_dominance >= 0.70 and whale_direction:
    if ai_action != whale_direction:
        action = whale_direction  # å¼·åˆ¶è·Ÿéš¨é¯¨é­š
```

### 6.3 æ­»æ°´ç›¤ç­–ç•¥

```python
# ATR < 0.05% è¦–ç‚ºæ­»æ°´ç›¤
is_dead = atr_pct < 0.05

if is_dead and whale_reversal_price > 0:
    reversal_distance = abs(price - reversal_price) / price * 100
    
    if reversal_distance < 0.3:  # æ¥è¿‘åè½‰é»
        # åšåå‘å–® (æŠ„åº•/æ‘¸é ‚)
        if ai_direction == "BEARISH" and price <= reversal_price:
            return {'action': 'LONG', 'is_maker': True}
```

---

## ğŸ”§ ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå¸¸ç”¨é–‹ç™¼åƒè€ƒ

### 7.1 æ–°å¢æŒ‡æ¨™çš„æ­¥é©Ÿ

1. åœ¨ `src/exchange/` æˆ– `src/metrics/` å‰µå»ºæ–°æ¨¡çµ„
2. åœ¨ `paper_trading_hybrid_full.py` ä¸­ import
3. åœ¨ `__init__` ä¸­åˆå§‹åŒ–
4. åœ¨ç­–ç•¥é‚è¼¯ä¸­ä½¿ç”¨
5. å°‡æ•¸æ“šå¯«å…¥ Bridge æ–‡ä»¶ä¾› AI ä½¿ç”¨

### 7.2 æ–°å¢ API æ•¸æ“šçš„æ­¥é©Ÿ

1. åœ¨ `fetch_binance_leverage_data.py` ä¸­æ–°å¢ç«¯é»
2. åœ¨ä¸»ç¨‹å¼ä¸­èª¿ç”¨ fetcher
3. è™•ç†æ•¸æ“šä¸¦å‚³éçµ¦ç›¸é—œæŒ‡æ¨™æ¨¡çµ„

### 7.3 ä¿®æ”¹ AI æ±ºç­–çš„æ­¥é©Ÿ

1. ä¿®æ”¹ Bridge æ–‡ä»¶çµæ§‹ (`wolf_to_ai`)
2. æ›´æ–° `ai_trading_advisor_gpt.py` ä¸­çš„ Prompt
3. èª¿æ•´ SNIPER_CONFIG åƒæ•¸

---

## ğŸ“Š é™„éŒ„ï¼šå®Œæ•´æ–‡ä»¶æ¸…å–®

### scripts/ ç›®éŒ„

| æ–‡ä»¶ | è¡Œæ•¸ | åŠŸèƒ½ |
|------|------|------|
| `paper_trading_testnet_hybrid.py` | 2489 | ä¸»åŸ·è¡Œç¨‹å¼ |
| `paper_trading_hybrid_full.py` | 7671 | æ ¸å¿ƒäº¤æ˜“é‚è¼¯ |
| `ai_trading_advisor_gpt.py` | 2356 | AI æ±ºç­–ç³»çµ± |
| `testnet_executor.py` | 1898 | Testnet åŸ·è¡Œå™¨ |
| `testnet_websocket_integration.py` | ~500 | WebSocket æ•´åˆ |
| `fetch_binance_leverage_data.py` | 303 | æ§“æ¡¿æ•¸æ“šç²å– |

### src/ æ¨¡çµ„

| ç›®éŒ„ | æ¨¡çµ„æ•¸ | ä¸»è¦åŠŸèƒ½ |
|------|--------|----------|
| `src/strategy/` | 4 | ç­–ç•¥é‚è¼¯ |
| `src/exchange/` | 5 | äº¤æ˜“æ‰€æŒ‡æ¨™ |
| `src/utils/` | 3 | å·¥å…·å‡½æ•¸ |
| `src/metrics/` | 2 | é¢¨éšªæŒ‡æ¨™ |

### é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `config/config.json` | ä¸»é…ç½® (API Keys) |
| `config/trading_strategies.json` | ç­–ç•¥åƒæ•¸ |
| `ai_wolf_bridge.json` | Wolf AI é€šè¨Š |
| `ai_profit_config.json` | åˆ©æ½¤é…ç½® |

---

> **æœ€å¾Œæ›´æ–°**: 2025-01-20
> **ä½œè€…**: System Architecture Documentation
> **ç‰ˆæœ¬**: v1.0
