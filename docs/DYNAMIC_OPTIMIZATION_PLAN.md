# å‹•æ…‹å„ªåŒ–ç­–ç•¥ï¼šç§‘å­¸çš„ Walk-Forward æ–¹æ¡ˆï¼ˆV2.0 ä¿®æ­£ç‰ˆï¼‰

> **æ ¸å¿ƒåŸå‰‡**: çµ•ä¸èƒ½ã€Œçœ‹åˆ°æœªä¾†å†èª¿éå»ã€ï¼Œé¿å…è‡ªæ¬ºå¼å„ªåŒ–  
> **æ–¹æ³•**: Time-Series CV + åˆ†å±¤æ¶æ§‹ + æ¼¸é€²å¼å¼•å…¥ ML/RL  
> **çµ‚æ¥µç›®æ¨™**: æ‰¾åˆ°åœ¨ã€ŒçœŸæ­£æœªçŸ¥æ•¸æ“šã€ä¸Šç©©å®šç›ˆåˆ©çš„ç­–ç•¥å®¶æ—

---

## âš ï¸ é¦–è¦å•é¡Œï¼šæ•¸æ“šå®Œæ•´æ€§

### ğŸ”´ Critical Issue: å¤§å–®æ•¸æ“šåªæœ‰ 7 å¤©

**ç¾ç‹€**:
- å¤§å–®æ•¸æ“š (aggTrades): åªæœ‰ 2025-11-08 ~ 11-15 (7å¤©)
- Kç·šæ•¸æ“š: 2020-2025 å®Œæ•´ (205,358 æ ¹)
- Funding Rate: 2020-2025 å®Œæ•´ (6,423 ç­†)

**å•é¡Œ**:
```
ç„¡æ³•æ¸¬è©¦ 2020-2024 çš„å¤§å–®ç­–ç•¥
â†“
ç„¡æ³•é©—è­‰å¤§å–®ç­–ç•¥çš„é•·æœŸæœ‰æ•ˆæ€§
â†“
Phase 7 çš„ 68% å‹ç‡å¯èƒ½æ˜¯ 7 å¤©çš„å‡è±¡
```

### âœ… è§£æ±ºæ–¹æ¡ˆï¼šç«‹å³ä¸‹è¼‰å®Œæ•´å¤§å–®æ•¸æ“š

**å„ªå…ˆç´š P0 - å¿…é ˆå…ˆå®Œæˆ**:

```bash
# ä¸‹è¼‰ 2020-2025 å®Œæ•´ aggTradesï¼ˆ>=10 BTC å¤§å–®ï¼‰
python scripts/download_agg_trades.py \
    --start_date 2020-01-01 \
    --end_date 2025-11-15 \
    --min_qty 10.0 \
    --interval 15m

# é è¨ˆæ™‚é–“: 2-3 å°æ™‚
# é è¨ˆå¤§å°: 500MB - 2GB
# ä¸‹è¼‰æ–¹å¼: åˆ†æ‰¹ä¸‹è¼‰ï¼Œé¿å… API é™åˆ¶
```

**ç‚ºä»€éº¼è¦å…ˆåšé€™å€‹ï¼Ÿ**
1. ç¾æœ‰ 7 å¤©æ•¸æ“šç„¡æ³•æ”¯æ’ Walk-Forward é©—è­‰
2. æŠ€è¡“æŒ‡æ¨™æ›¿ä»£ç­–ç•¥è¡¨ç¾å·®ï¼ˆ40.2% å‹ç‡ï¼‰
3. å¤§å–®ç­–ç•¥æ‰æ˜¯æ ¸å¿ƒç«¶çˆ­åŠ›ï¼ˆä¿¡æ¯å„ªå‹¢ L0ï¼‰
4. å®Œæ•´æ•¸æ“šä¸‹è¼‰å¾Œå¯ä¸€å‹æ°¸é€¸

**ä¸‹è¼‰å¾Œé©—è­‰**:
```python
# é©—è­‰æ•¸æ“šå®Œæ•´æ€§
python scripts/verify_large_trade_data.py
# è¼¸å‡ºé æœŸ: 2020-2025 æ¯æœˆè‡³å°‘ 100 ç­†å¤§å–®
```

---

## ğŸ“‹ æ­£ç¢ºçš„ Walk-Forward æµç¨‹ï¼ˆé¿å…è‡ªæ¬ºï¼‰

### ğŸš« éŒ¯èª¤åšæ³•ï¼ˆæœƒè‡ªæ¬ºï¼‰

```
âŒ éŒ¯èª¤æµç¨‹:
1. ç”¨ 2020 æ¸¬è©¦ï¼Œèª¿åƒæ•¸åˆ° 60% å‹ç‡
2. ç™¼ç¾ 2021 ä¸å¥½ â†’ æ”¹ç­–ç•¥ â†’ å†å›é ­æ¸¬ 2020
3. ç”¨ 2020+2021 ä¸€èµ·è¨“ç·´ â†’ æ¸¬ 2022 ä¸å¥½ â†’ å†æ”¹
4. ä¸€è·¯æ”¹åˆ° 2025 æ‰€æœ‰å¹´ä»½éƒ½æ¼‚äº®
   â†“
   çµæœ: ç”¨äº†å…¨éƒ¨ 2020-2025 çš„ä¿¡æ¯ä¾†èª¿ç­–ç•¥
   â†“
   å¯¦ç›¤: å®Œå…¨ä¸æ˜¯é‚£å›äº‹ ğŸ“‰
```

**ç‚ºä»€éº¼éŒ¯ï¼Ÿ**
- ä½ å·²ç¶“ã€Œçœ‹åˆ°æœªä¾†ã€(2021-2025) å†å›é ­èª¿ 2020
- ç­–ç•¥éš±æ€§è¨˜ä½äº†æ‰€æœ‰å¹´ä»½çš„ç‰¹å¾µ
- å›æ¸¬æ¼‚äº® â‰  å¯¦ç›¤æœ‰æ•ˆ

### âœ… æ­£ç¢ºåšæ³•ï¼šTime-Series Cross-Validation

```
Strategy Structure (å›ºå®š) â† åªèª¿é€™å€‹å±¤ç´šçš„åƒæ•¸
â”œâ”€â”€ L0 ä¿¡è™Ÿ: Funding + å¤§å–® + OB
â”œâ”€â”€ L1 ä¿¡è™Ÿ: MA + RSI + BOLL
â”œâ”€â”€ å‡ºå ´: TP/SL/æ™‚é–“æ­¢æ
â””â”€â”€ å‹•æ…‹èª¿åƒ: æ ¹æ“šå¸‚å ´ç‹€æ…‹èª¿æ•´é–¾å€¼

â¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸ºâ¸º

Time-Series CV Folds (çµ•ä¸å›é ­çœ‹)

Fold 1:  Train: 2020     â†’  Test: 2021  (å‡çµåƒæ•¸)
Fold 2:  Train: 2020-21  â†’  Test: 2022  (å‡çµåƒæ•¸)
Fold 3:  Train: 2020-22  â†’  Test: 2023  (å‡çµåƒæ•¸)
Fold 4:  Train: 2020-23  â†’  Test: 2024  (å‡çµåƒæ•¸)
Fold 5:  Train: 2020-24  â†’  Test: 2025  (å‡çµåƒæ•¸)

æ¯å€‹ Fold çš„ Test çµæœ = ã€ŒçœŸæ­£æœªçŸ¥æ•¸æ“šã€çš„è¡¨ç¾
```

**æ ¸å¿ƒåŸå‰‡**:
1. **å‡çµç­–ç•¥çµæ§‹**: ä¸èƒ½æ¯æ¬¡æ¸¬è©¦å¤±æ•—å°±æ”¹éŠæˆ²è¦å‰‡
2. **åªèª¿åƒæ•¸**: åœ¨ Train æœŸé–“ç”¨ Grid/Bayesian Search æ‰¾æœ€å„ªåƒæ•¸
3. **Test çµ•ä¸èª¿åƒ**: Test æœŸé–“åƒæ•¸å®Œå…¨å‡çµï¼Œæ¨¡æ“¬å¯¦ç›¤
4. **ç´¯ç©å¼è¨“ç·´**: æ¯æ¬¡ Train ç”¨å…¨éƒ¨éå»æ•¸æ“šï¼Œä½†çµ•ä¸çœ‹æœªä¾†

### ğŸ¯ æ­£ç¢ºæµç¨‹ç¤ºä¾‹

```python
# Fold 1: 2020 Train â†’ 2021 Test
train_data = df[df['year'] == 2020]
test_data = df[df['year'] == 2021]

# åœ¨ 2020 ç”¨ Grid Search æ‰¾æœ€å„ªåƒæ•¸
best_params_2020 = grid_search(
    train_data,
    param_grid={
        'funding_threshold': [0.001, 0.0015, 0.002],
        'whale_imbalance': [0.3, 0.4, 0.5],
        'tp': [0.003, 0.005, 0.007],
        'leverage': [10, 15, 20]
    },
    scoring='sharpe_ratio'  # æˆ–è‡ªå®šç¾©è©•åˆ†
)

# âš ï¸ å‡çµåƒæ•¸ï¼Œæ¸¬è©¦ 2021ï¼ˆä¸èƒ½å†èª¿ï¼‰
result_2021 = backtest(test_data, best_params_2020)

# Fold 2: 2020-2021 Train â†’ 2022 Test
train_data = df[df['year'].isin([2020, 2021])]
test_data = df[df['year'] == 2022]

# é‡æ–°åœ¨ 2020-2021 æœç´¢åƒæ•¸ï¼ˆå…è¨±ä¸åŒæ–¼ 2020ï¼‰
best_params_2021 = grid_search(train_data, param_grid, scoring)

# âš ï¸ å‡çµåƒæ•¸ï¼Œæ¸¬è©¦ 2022
result_2022 = backtest(test_data, best_params_2021)

# ... ä¾æ­¤é¡æ¨åˆ° 2025
```

### ğŸ“Š è©•ä¼°æŒ‡æ¨™è¡¨ï¼ˆé‡‘æ¨™æº–ï¼‰

**æ¯å€‹ Fold ç”¢ç”Ÿä¸€è¡Œçµæœ**:

| Fold | Train Period | Test Year | Trades | Win Rate | Return | Sharpe | Max DD |
|------|--------------|-----------|--------|----------|--------|--------|--------|
| 1    | 2020         | 2021      | ?      | ?        | ?      | ?      | ?      |
| 2    | 2020-2021    | 2022      | ?      | ?        | ?      | ?      | ?      |
| 3    | 2020-2022    | 2023      | ?      | ?        | ?      | ?      | ?      |
| 4    | 2020-2023    | 2024      | ?      | ?        | ?      | ?      | ?      |
| 5    | 2020-2024    | 2025      | ?      | ?        | ?      | ?      | ?      |

**é€™å¼µè¡¨å›ç­”**:
- âœ… ç­–ç•¥åœ¨ã€ŒçœŸæ­£æœªçŸ¥æ•¸æ“šã€ä¸Šçš„è¡¨ç¾
- âœ… æ˜¯å¦ç©©å®šï¼ˆå„å¹´å·®ç•°æ˜¯å¦éå¤§ï¼‰
- âœ… æ˜¯å¦éæ“¬åˆï¼ˆTest æ˜é¡¯å·®æ–¼ Trainï¼‰

**ç›®æ¨™**:
- Test å‹ç‡ â‰¥ 60% (æ‰€æœ‰ Fold)
- Test å¹´åŒ–å›å ± â‰¥ 30%
- Sharpe Ratio â‰¥ 1.5
- Max DD â‰¤ 20%

---

## ğŸ¯ ä¸‰å±¤æ¶æ§‹ï¼šåˆ†éšæ®µå¼•å…¥ ML/RL

### ğŸ¥‰ Layer 1: æ‰‹å·¥è¦å‰‡ç­–ç•¥ï¼ˆå·²æœ‰ï¼Œéœ€å®Œå–„ï¼‰

**ç¾ç‹€**:
```python
# ä½ å·²ç¶“æœ‰çš„
MVPStrategyV2: RSI + MA + Volume
LargeTradeScraper: å¤§å–®æª¢æ¸¬
FundingRateStrategy: Funding æ¥µç«¯å€¼

# éœ€è¦è£œå®Œ
OrderBookImbalance: è¨‚å–®ç°¿ä¸å¹³è¡¡
WhaleTracking: é¯¨é­šæŒå€‰è¿½è¹¤
```

**è¼¸å‡º**:
- åŸºç¤ä¿¡è™Ÿ: LONG/SHORT/NEUTRAL + confidence
- å›ºå®šåƒæ•¸: TP/SL/leverage

**å„ªé»**:
- å¯è§£é‡‹æ€§å¼·
- å¿«é€Ÿè¿­ä»£
- æ˜“æ–¼èª¿è©¦

**ç¼ºé»**:
- ç„¡æ³•è‡ªé©æ‡‰å¸‚å ´è®ŠåŒ–
- åƒæ•¸éœ€æ‰‹å‹•èª¿æ•´

---

### ğŸ¥ˆ Layer 2: å‚³çµ± ML å‹•æ…‹èª¿åƒï¼ˆæ¨è–¦å…ˆåšï¼‰â­

**ç›®æ¨™**: æ ¹æ“šç•¶å‰å¸‚å ´ç‹€æ…‹ï¼Œå‹•æ…‹èª¿æ•´åƒæ•¸

#### è¼¸å…¥ç‰¹å¾µ (State Features)

```python
market_state = {
    # æ³¢å‹•åº¦
    'atr_14': ç•¶å‰ ATR / 30æ—¥å¹³å‡ ATR,
    'volatility_regime': 'high' / 'medium' / 'low',
    
    # è¶¨å‹¢
    'ma7_ma25_diff': (MA7 - MA25) / price,
    'trend_strength': ADX å€¼,
    
    # L0 ä¿¡è™Ÿå¼·åº¦
    'funding_extreme': abs(funding) / std(funding),
    'whale_activity': è¿‘1å°æ™‚å¤§å–®æ•¸é‡,
    'ob_imbalance': (bid - ask) / (bid + ask),
    
    # è¿‘æœŸè¡¨ç¾
    'recent_win_rate': æœ€è¿‘10ç­†å‹ç‡,
    'consecutive_losses': é€£çºŒè™§ææ•¸,
    'current_drawdown': ç•¶å‰å›æ’¤ %,
    
    # å¸‚å ´é€±æœŸ
    'hour_of_day': 0-23,
    'day_of_week': 0-6,
    'is_us_trading_hours': bool
}
```

#### è¼¸å‡ºæ±ºç­– (Actions)

```python
dynamic_params = {
    # é¢¨éšªç­‰ç´š
    'risk_level': 'low' / 'medium' / 'high',
    
    # TP/SL èª¿æ•´
    'tp_multiplier': 0.5 - 2.0,  # åŸºç¤ TP Ã— multiplier
    'sl_multiplier': 0.5 - 2.0,
    
    # æ§“æ¡¿èª¿æ•´
    'leverage': 5 - 25,
    
    # ä¿¡è™Ÿéæ¿¾
    'min_confidence': 0.3 - 0.7,
    'trade_or_skip': bool  # ç•¶å‰æ˜¯å¦é©åˆäº¤æ˜“
}
```

#### è¨“ç·´æ–¹å¼ï¼ˆSupervised Learningï¼‰

```python
# å¾æ­·å²å›æ¸¬ä¸­æå–è¨“ç·´æ¨£æœ¬
training_samples = []

for trade in historical_trades:
    feature = extract_market_state(trade.timestamp)
    label = {
        'optimal_tp': trade.best_tp_retrospective,  # å›é¡§æœ€å„ª TP
        'optimal_sl': trade.best_sl_retrospective,
        'optimal_leverage': trade.best_leverage_retrospective,
        'should_trade': trade.final_pnl > 0  # æ˜¯å¦è©²äº¤æ˜“
    }
    training_samples.append((feature, label))

# è¨“ç·´æ¨¡å‹
model = XGBoost / RandomForest / LightGBM
model.fit(X_train, y_train)

# æ‡‰ç”¨
current_state = extract_market_state(now)
predicted_params = model.predict(current_state)
```

**å„ªé»**:
- âœ… æ¯” RL ç°¡å–® 10 å€
- âœ… è¨“ç·´å¿«ï¼ˆåˆ†é˜ç´šåˆ¥ï¼‰
- âœ… å¯è§£é‡‹ï¼ˆSHAP valuesï¼‰
- âœ… ç›´æ¥ç”¨æ­·å²å›æ¸¬æ•¸æ“š supervised å­¸ç¿’

**ä½•æ™‚åšé€™å€‹ï¼Ÿ**
ç•¶ä½ çš„ Layer 1 è·‘å®Œ Time-Series CV å¾Œï¼Œç™¼ç¾ï¼š
- æŸäº›å¹´ä»½å¥½ï¼ŒæŸäº›å¹´ä»½å·®
- ä¸åŒå¸‚å ´ç‹€æ…‹åƒæ•¸éœ€è¦ä¸åŒ
- æ‰‹å·¥èª¿åƒå¤ªè²»æ™‚

---

### ğŸ¥‡ Layer 3: å¼·åŒ–å­¸ç¿’ Meta æ§åˆ¶å™¨ï¼ˆæœ€å¾Œæ‰è€ƒæ…®ï¼‰

**âš ï¸ é‡è¦**: ä¸æ˜¯è®“ RL ç›´æ¥ä¸‹å–®ï¼Œè€Œæ˜¯ç•¶ã€Œç­–ç•¥èª¿åº¦å™¨ã€

#### RL æ‰®æ¼”çš„è§’è‰²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Meta Controller (RL Agent)              â”‚
â”‚  â”œâ”€â”€ æ±ºç­–: ä»Šå¤©è¦ä¸è¦äº¤æ˜“                â”‚
â”‚  â”œâ”€â”€ æ±ºç­–: é–‹å¹¾æˆç«åŠ›ï¼ˆ0% - 200%ï¼‰       â”‚
â”‚  â”œâ”€â”€ æ±ºç­–: å•Ÿç”¨å“ªäº›å­ç­–ç•¥                â”‚
â”‚  â””â”€â”€ æ±ºç­–: æ¯å€‹ç­–ç•¥çš„é¢¨éšªä¹˜æ•¸            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sub-Strategies (Layer 1 + Layer 2)      â”‚
â”‚  â”œâ”€â”€ Funding Extreme Strategy            â”‚
â”‚  â”œâ”€â”€ Whale Imbalance Strategy            â”‚
â”‚  â”œâ”€â”€ Scalping V1 Strategy                â”‚
â”‚  â””â”€â”€ News Factor Strategy                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### State Space (è¼¸å…¥)

```python
state = {
    # å®è§€å¸‚å ´
    'btc_trend': 'ä¸Šæ¼²' / 'ä¸‹è·Œ' / 'ç›¤æ•´',
    'volatility_percentile': 0-100,  # ç•¶å‰æ³¢å‹•åœ¨æ­·å²ä¸­çš„ä½ç½®
    'funding_rate_extreme': bool,
    
    # å„å­ç­–ç•¥è¿‘æœŸè¡¨ç¾
    'funding_strategy_7d_return': %,
    'whale_strategy_7d_winrate': %,
    'scalping_strategy_sharpe': float,
    
    # çµ„åˆè¡¨ç¾
    'portfolio_drawdown': %,
    'portfolio_sharpe': float,
    'consecutive_days_loss': int,
    
    # æ–°è/äº‹ä»¶
    'major_news_today': bool,
    'whale_alert_count': int
}
```

#### Action Space (è¼¸å‡º)

```python
action = {
    # ç¸½é–‹é—œ
    'trading_enabled': bool,
    
    # å„ç­–ç•¥æ¬Šé‡
    'funding_strategy_weight': 0.0 - 2.0,  # 0=é—œé–‰, 1=æ­£å¸¸, 2=åŠ å€
    'whale_strategy_weight': 0.0 - 2.0,
    'scalping_strategy_weight': 0.0 - 2.0,
    'news_strategy_weight': 0.0 - 2.0,
    
    # å…¨å±€é¢¨éšª
    'global_risk_multiplier': 0.5 - 2.0
}
```

#### Reward Function

```python
reward = (
    daily_pnl * 10  # ä¸»è¦ç›®æ¨™: ç›ˆåˆ©
    - max_drawdown * 50  # é‡æ‡²ç½°å›æ’¤
    - overtrade_penalty * 20  # æ‡²ç½°éåº¦äº¤æ˜“
    + sharpe_bonus * 30  # çå‹µç©©å®šæ€§
)
```

#### ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ

| è¨­è¨ˆ | åŸå›  |
|------|------|
| **ä¸ç›´æ¥ä¸‹å–®** | é¿å… RL å­¸å‡ºå¥‡æ€ªæ“ä½œ |
| **ä¸€å¤©ä¸€å€‹ step** | é™ä½ç¶­åº¦ï¼Œæ›´ç©©å®š |
| **èª¿åº¦å­ç­–ç•¥** | ä¿ç•™å¯è§£é‡‹æ€§ |
| **é‡æ‡²ç½°å›æ’¤** | ç¬¦åˆå¯¦ç›¤é¢¨æ§ |

**ä½•æ™‚æ‰éœ€è¦ RLï¼Ÿ**
- Layer 1 + Layer 2 å·²ç¶“ç©©å®šç›ˆåˆ©
- ç™¼ç¾å¤šç­–ç•¥çµ„åˆéœ€è¦è¤‡é›œèª¿åº¦é‚è¼¯
- æ‰‹å·¥è¦å‰‡å·²ç¶“å¤ªè¤‡é›œé›£ä»¥ç¶­è­·
- æœ‰ GPU è³‡æºå’Œ 2-4 é€±æ™‚é–“æŠ•å…¥

---

---

## ğŸš€ å¯¦æ–½è·¯ç·šåœ–ï¼ˆä¿®æ­£ç‰ˆï¼‰

### ğŸ“… Week 0: æ•¸æ“šæº–å‚™ï¼ˆP0 - å¿…é ˆå…ˆåšï¼‰â­â­â­

**ç›®æ¨™**: ä¸‹è¼‰å®Œæ•´ 2020-2025 å¤§å–®æ•¸æ“š

```bash
# Day 1-2: ä¸‹è¼‰ aggTrades
python scripts/download_agg_trades_full.py \
    --start 2020-01-01 \
    --end 2025-11-15 \
    --min_qty 10.0 \
    --symbol BTCUSDT

# é è¨ˆè¼¸å‡º: data/historical/BTCUSDT_agg_trades_2020_2025.parquet
# é è¨ˆå¤§å°: 500MB - 2GB
# é è¨ˆæ™‚é–“: 2-3 å°æ™‚ï¼ˆåˆ†æ‰¹ä¸‹è¼‰ï¼Œé¿å… API é™åˆ¶ï¼‰
```

**é©—è­‰**:
```bash
python scripts/verify_data_coverage.py
# è¼¸å‡ºé æœŸ:
# âœ… 2020: 1,234 ç­†å¤§å–®
# âœ… 2021: 2,456 ç­†å¤§å–®
# âœ… 2022: 1,890 ç­†å¤§å–®
# âœ… 2023: 1,567 ç­†å¤§å–®
# âœ… 2024: 2,101 ç­†å¤§å–®
# âœ… 2025: 1,834 ç­†å¤§å–®
# âœ… ç¸½è¨ˆ: 11,082 ç­†å¤§å–®
```

**ä¸åšé€™å€‹çš„å¾Œæœ**:
- âŒ åªèƒ½ç”¨ 7 å¤©æ•¸æ“šæ¸¬è©¦ï¼ˆçµ±è¨ˆç„¡æ„ç¾©ï¼‰
- âŒ ç„¡æ³•é©—è­‰ 2020-2024 ç­–ç•¥æœ‰æ•ˆæ€§
- âŒ Phase 7 çš„ 68% å‹ç‡ç„¡æ³•ä¿¡ä»»

---

### ğŸ“… Week 1: Time-Series CV æ¡†æ¶ï¼ˆLayer 1ï¼‰

**ç›®æ¨™**: å»ºç«‹ã€Œä¸è‡ªæ¬ºã€çš„æ¸¬è©¦æ¡†æ¶

#### Day 1-2: å»ºç«‹ CV æ¡†æ¶

```bash
# å‰µå»º Time-Series CV é¡åˆ¥
python scripts/create_timeseries_cv.py

# è¼¸å‡º: src/evaluation/timeseries_cv.py
```

**æ ¸å¿ƒä»£ç¢¼**:
```python
class TimeSeriesCV:
    """æ™‚é–“åºåˆ—äº¤å‰é©—è­‰"""
    
    def __init__(self, start_year=2020, end_year=2025):
        self.folds = [
            {'train': [2020], 'test': 2021},
            {'train': [2020, 2021], 'test': 2022},
            {'train': [2020, 2021, 2022], 'test': 2023},
            {'train': [2020, 2021, 2022, 2023], 'test': 2024},
            {'train': [2020, 2021, 2022, 2023, 2024], 'test': 2025}
        ]
    
    def run_fold(self, strategy, fold, param_grid):
        """é‹è¡Œå–®å€‹ Fold"""
        # 1. åœ¨ Train æœŸé–“æœç´¢æœ€å„ªåƒæ•¸
        train_data = self.get_data(fold['train'])
        best_params = self.grid_search(
            strategy, train_data, param_grid
        )
        
        # 2. âš ï¸ å‡çµåƒæ•¸ï¼Œæ¸¬è©¦ Test æœŸé–“
        test_data = self.get_data(fold['test'])
        test_result = strategy.backtest(
            test_data, best_params, allow_refit=False  # ç¦æ­¢èª¿åƒ
        )
        
        return {
            'train_period': fold['train'],
            'test_year': fold['test'],
            'best_params': best_params,
            'test_metrics': test_result
        }
    
    def run_all_folds(self, strategy, param_grid):
        """é‹è¡Œå…¨éƒ¨ Folds"""
        results = []
        for fold in self.folds:
            result = self.run_fold(strategy, fold, param_grid)
            results.append(result)
        
        # ç”Ÿæˆè©•ä¼°è¡¨
        self.generate_report(results)
        return results
```

#### Day 3-4: é‡æ§‹ç¾æœ‰ç­–ç•¥

```bash
# é‡æ§‹ MVPStrategyV2 æ”¯æŒ CV
python scripts/refactor_strategy_for_cv.py \
    --strategy MVPStrategyV2

# é‡æ§‹å¤§å–®ç­–ç•¥
python scripts/refactor_strategy_for_cv.py \
    --strategy LargeTradeStrategy

# é‡æ§‹ Funding ç­–ç•¥
python scripts/refactor_strategy_for_cv.py \
    --strategy FundingStrategy
```

**ç¢ºä¿æ¯å€‹ç­–ç•¥æœ‰**:
- `fit(train_data, param_grid)`: åœ¨è¨“ç·´é›†æœç´¢æœ€å„ªåƒæ•¸
- `predict(test_data, frozen_params)`: ç”¨å‡çµåƒæ•¸æ¸¬è©¦
- `get_param_grid()`: è¿”å›åƒæ•¸æœç´¢ç©ºé–“

#### Day 5-7: é‹è¡Œå®Œæ•´ CV

```bash
# é‹è¡Œ MVPStrategyV2 çš„ Time-Series CV
python scripts/run_cv_mvp_v2.py

# é‹è¡Œå¤§å–®ç­–ç•¥çš„ CV
python scripts/run_cv_large_trade.py

# é‹è¡Œ Funding ç­–ç•¥çš„ CV
python scripts/run_cv_funding.py

# æ¯”è¼ƒä¸‰å€‹ç­–ç•¥
python scripts/compare_cv_results.py
```

**é æœŸè¼¸å‡º**:

```
ğŸ“Š Time-Series CV çµæœå°æ¯”

Strategy: MVPStrategyV2 (æŠ€è¡“æŒ‡æ¨™)
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fold â”‚ Train     â”‚ Test â”‚ Trades â”‚ Win Rate â”‚ Return â”‚ Sharpe  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1   â”‚ 2020      â”‚ 2021 â”‚   28   â”‚  57.1%   â”‚ +0.98% â”‚  1.2    â”‚
â”‚  2   â”‚ 2020-21   â”‚ 2022 â”‚   22   â”‚  27.3%   â”‚ -0.68% â”‚ -0.5    â”‚
â”‚  3   â”‚ 2020-22   â”‚ 2023 â”‚    4   â”‚  25.0%   â”‚ -0.08% â”‚ -0.2    â”‚
â”‚  4   â”‚ 2020-23   â”‚ 2024 â”‚   12   â”‚  41.7%   â”‚ +0.04% â”‚  0.1    â”‚
â”‚  5   â”‚ 2020-24   â”‚ 2025 â”‚   11   â”‚  18.2%   â”‚ -0.59% â”‚ -0.8    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
å¹³å‡ Test å‹ç‡: 33.9%  âŒ æœªé”æ¨™
å¹³å‡ Test å›å ±: -0.07% âŒ æœªé”æ¨™

Strategy: LargeTradeStrategy (å¤§å–® + OB)
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fold â”‚ Train     â”‚ Test â”‚ Trades â”‚ Win Rate â”‚ Return â”‚ Sharpe  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1   â”‚ 2020      â”‚ 2021 â”‚   ?    â”‚    ?     â”‚   ?    â”‚   ?     â”‚
â”‚ ...  â”‚ ...       â”‚ ...  â”‚  ...   â”‚   ...    â”‚  ...   â”‚  ...    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ çµè«–: å“ªå€‹ç­–ç•¥æœ€ç©©å®šï¼Ÿæ˜¯å¦éœ€è¦çµ„åˆï¼Ÿ
```

---

### ğŸ“… Week 2-3: Layer 2 - ML å‹•æ…‹èª¿åƒ

**å‰æ**: Week 1 çš„ CV é¡¯ç¤ºç­–ç•¥ä¸ç©©å®šï¼ˆæŸäº›å¹´å¥½æŸäº›å¹´å·®ï¼‰

#### Day 1-3: ç‰¹å¾µå·¥ç¨‹

```bash
# å¾æ­·å²å›æ¸¬æå–è¨“ç·´æ¨£æœ¬
python scripts/extract_ml_training_data.py \
    --strategy MVPStrategyV2 \
    --start_year 2020 \
    --end_year 2024

# è¼¸å‡º: data/ml_training/market_state_samples.parquet
```

**æ¨£æœ¬æ ¼å¼**:
```python
{
    'timestamp': '2021-03-15 10:30:00',
    'features': {
        'atr_normalized': 1.2,
        'volatility_regime': 'high',
        'funding_extreme': 2.5,
        'recent_win_rate': 0.45,
        ...
    },
    'labels': {
        'optimal_tp': 0.005,  # å›é¡§æœ€å„ª
        'optimal_leverage': 15,
        'should_trade': True,
        'actual_pnl': 0.008
    }
}
```

#### Day 4-5: è¨“ç·´ ML æ¨¡å‹

```bash
# è¨“ç·´å‹•æ…‹èª¿åƒæ¨¡å‹
python scripts/train_dynamic_adjuster.py \
    --model xgboost \
    --target optimal_tp,optimal_leverage,should_trade

# è¼¸å‡º: models/trained/dynamic_adjuster_xgb.pkl
```

**é©—è­‰æ¨¡å‹**:
```bash
# ç”¨ 2020-2023 è¨“ç·´ï¼Œ2024 é©—è­‰
python scripts/validate_ml_model.py \
    --train_years 2020-2023 \
    --val_year 2024
```

#### Day 6-7: æ•´åˆåˆ°ç­–ç•¥

```bash
# å‰µå»º ML-Enhanced ç­–ç•¥
python scripts/create_ml_enhanced_strategy.py \
    --base_strategy MVPStrategyV2 \
    --ml_model dynamic_adjuster_xgb.pkl

# é‡æ–°é‹è¡Œ Time-Series CV
python scripts/run_cv_mvp_v2_ml_enhanced.py
```

**é æœŸæ”¹å–„**:
```
Before ML (Pure Rules):
å¹³å‡ Test å‹ç‡: 33.9% âŒ

After ML (Dynamic Params):
å¹³å‡ Test å‹ç‡: 52.3% âœ… (+18.4%)
æœ€å·®å¹´ä»½å‹ç‡: 41.2% (vs 18.2%)
```

---

### ğŸ“… Week 4+: Layer 3 - RL Meta æ§åˆ¶å™¨ï¼ˆå¯é¸ï¼‰

**å‰æ**: Layer 1 + Layer 2 å·²ç¶“ç©©å®šç›ˆåˆ©ï¼Œä½†å¤šç­–ç•¥çµ„åˆè¤‡é›œ

#### åƒ…ç•¶æ»¿è¶³ä»¥ä¸‹æ¢ä»¶æ‰åš:

1. âœ… å–®ç­–ç•¥å·²ç¶“ç©©å®š 60%+ å‹ç‡
2. âœ… æœ‰ 3+ å€‹äº’è£œçš„å­ç­–ç•¥
3. âœ… æ‰‹å·¥çµ„åˆè¦å‰‡å·²ç¶“å¾ˆè¤‡é›œ
4. âœ… æœ‰ GPU è³‡æºï¼ˆRTX 3090 æˆ– Colab Proï¼‰
5. âœ… æœ‰ 2-4 é€±å®Œæ•´æ™‚é–“æŠ•å…¥

#### å¯¦æ–½æ­¥é©Ÿ:

```bash
# å‰µå»º RL ç’°å¢ƒ
python scripts/create_rl_meta_env.py

# è¨“ç·´ PPO Agent
python scripts/train_rl_meta_controller.py \
    --env MetaTradingEnv \
    --agent PPO \
    --episodes 10000

# Walk-Forward é©—è­‰
python scripts/run_cv_rl_meta.py
```

**ä½†è¨˜ä½**: RL ä¸æ˜¯è¬èƒ½è—¥ï¼Œå¾ˆå¯èƒ½æ•ˆæœä¸å¦‚ Layer 2

---

## ğŸ’¡ é—œéµå•é¡Œå›ç­”

### Q1: ä¸€å®šè¦ç”¨å¼·åŒ–å­¸ç¿’å—ï¼Ÿ

**ç­”**: âŒ **ä¸ä¸€å®šï¼Œè€Œä¸”å»ºè­°æœ€å¾Œæ‰è€ƒæ…®**

| éšæ®µ | æ–¹æ³• | é©ç”¨å ´æ™¯ | é–‹ç™¼æ™‚é–“ | é¢¨éšª | æ¨è–¦åº¦ |
|------|------|----------|----------|------|--------|
| **Layer 1** | æ‰‹å·¥è¦å‰‡ + Grid Search | ç­–ç•¥é©—è­‰ã€å¿«é€Ÿè¿­ä»£ | 1-2 é€± | ä½ | â­â­â­â­â­ |
| **Layer 2** | XGBoost/RF å‹•æ…‹èª¿åƒ | åƒæ•¸éš¨å¸‚å ´è‡ªé©æ‡‰ | 1-2 é€± | ä¸­ | â­â­â­â­ |
| **Layer 3** | RL Meta æ§åˆ¶å™¨ | å¤šç­–ç•¥è¤‡é›œçµ„åˆ | 2-4 é€± | é«˜ | â­â­ |

**ç†ç”±**:
1. Layer 1 å·²ç¶“èƒ½é”åˆ° 60-70% å‹ç‡ï¼ˆå¦‚ Funding ç­–ç•¥ 72.6%ï¼‰
2. Layer 2 æ›´ç°¡å–®ã€æ›´å¿«ã€æ›´å¯è§£é‡‹
3. RL å®¹æ˜“éæ“¬åˆï¼Œèª¿è©¦å›°é›£
4. é‡‘èæ•¸æ“šéå¹³ç©©ï¼ŒRL å„ªå‹¢ä¸æ˜é¡¯

**ä»€éº¼æ™‚å€™æ‰éœ€è¦ RLï¼Ÿ**
- æœ‰ 5+ å€‹å­ç­–ç•¥éœ€è¦å‹•æ…‹çµ„åˆ
- æ‰‹å·¥è¦å‰‡å·²ç¶“ç„¡æ³•ç¶­è­·
- Layer 1 + Layer 2 å·²ç¶“ç›ˆåˆ©ä½†æƒ³é€²ä¸€æ­¥å„ªåŒ–
- æœ‰å……è¶³æ™‚é–“å’Œ GPU è³‡æº

---

### Q2: TensorFlow vs PyTorchï¼Ÿ

**ç­”**: æ¨è–¦ **PyTorch**ï¼ˆæ›´éˆæ´»ã€ç¤¾ç¾¤æ›´æ´»èºã€èª¿è©¦æ›´å‹å¥½ï¼‰

```python
# PyTorch æ›´ç°¡æ½”
import torch
import torch.nn as nn

model = nn.Sequential(
    nn.Linear(10, 64),
    nn.ReLU(),
    nn.Linear(64, 3)
)

# TensorFlow è¼ƒç¹ç‘£
import tensorflow as tf

model = tf.keras.Sequential([
    tf.keras.layers.Dense(64, activation='relu', input_shape=(10,)),
    tf.keras.layers.Dense(3)
])
```

**ä½†**:
- Layer 2 (XGBoost/RF) ä¸éœ€è¦æ·±åº¦å­¸ç¿’æ¡†æ¶
- Layer 3 (RL) å¦‚æœçœŸè¦åšï¼ŒPyTorch æ›´å¥½

---

### Q3: éœ€è¦å¤šå°‘è¨ˆç®—è³‡æºï¼Ÿ

| éšæ®µ | CPU | GPU | æ™‚é–“ | æˆæœ¬ |
|------|-----|-----|------|------|
| **Week 0: æ•¸æ“šä¸‹è¼‰** | M1 MacBook | âŒ ä¸éœ€è¦ | 2-3 å°æ™‚ | $0 |
| **Week 1: Layer 1 CV** | M1 MacBook | âŒ ä¸éœ€è¦ | 1-2 å¤© | $0 |
| **Week 2-3: Layer 2 ML** | M1 MacBook | âŒ ä¸éœ€è¦ | åŠå¤© | $0 |
| **Week 4+: Layer 3 RL** | ä¸æ¨è–¦ | âœ… RTX 3090 / A100 | 2-3 å¤© | Colab Pro $10/æœˆ |

**çµè«–**: å‰ä¸‰é€±åœ¨ MacBook ä¸Šå°±èƒ½å®Œæˆï¼Œä¸éœ€è¦ GPU

---

## ğŸ¯ æˆ‘çš„å»ºè­°ï¼ˆä¿®æ­£ç‰ˆï¼‰

### ç«‹å³åŸ·è¡Œï¼ˆæœ¬é€±ï¼‰â­â­â­

#### é¸é … A: å…ˆä¸‹è¼‰å®Œæ•´å¤§å–®æ•¸æ“šï¼ˆå¼·çƒˆæ¨è–¦ï¼‰

```bash
# Week 0: æ•¸æ“šæº–å‚™
python scripts/download_agg_trades_full.py --start 2020-01-01
python scripts/verify_data_coverage.py

# Week 1: Time-Series CV
python scripts/create_timeseries_cv.py
python scripts/run_cv_all_strategies.py

# Week 2: åˆ†æçµæœï¼Œæ±ºå®šæ˜¯å¦éœ€è¦ Layer 2
python scripts/analyze_cv_results.py
```

**ç‚ºä»€éº¼é€™å€‹æœ€é‡è¦ï¼Ÿ**
1. 7 å¤©æ•¸æ“šç„¡æ³•é©—è­‰ä»»ä½•ç­–ç•¥
2. å®Œæ•´æ•¸æ“šä¸‹è¼‰ä¸€æ¬¡ï¼Œçµ‚èº«å—ç”¨
3. ä¸åšé€™å€‹ï¼Œå¾Œé¢éƒ½æ˜¯ç©ºä¸­æ¨“é–£

**æ™‚é–“æŠ•å…¥**: 
- æ•¸æ“šä¸‹è¼‰: 2-3 å°æ™‚ï¼ˆè‡ªå‹•é‹è¡Œï¼‰
- CV æ¡†æ¶: 3-4 å¤©é–‹ç™¼
- ç¸½è¨ˆ: 1 é€±

---

#### é¸é … B: ç”¨ç¾æœ‰æ•¸æ“šå…ˆå»ºç«‹ CV æ¡†æ¶ï¼ˆæ¬¡æ¨è–¦ï¼‰

å¦‚æœ Binance API é™åˆ¶ç„¡æ³•ä¸‹è¼‰å®Œæ•´æ­·å²æ•¸æ“šï¼Œå¯ä»¥ï¼š

```bash
# ç”¨ Funding Rateï¼ˆå·²æœ‰å®Œæ•´æ•¸æ“šï¼‰å…ˆå»ºç«‹æ¡†æ¶
python scripts/run_cv_funding_only.py

# é©—è­‰ CV æ¡†æ¶æ­£ç¢ºæ€§
# ç­‰å¤§å–®æ•¸æ“šç´¯ç©åˆ° 30 å¤©å¾Œå†æ•´åˆ
```

**ç¼ºé»**: 
- Funding ç­–ç•¥ 2023-2025 ä¿¡è™Ÿå¤ªå°‘
- ç„¡æ³•æ¸¬è©¦æ ¸å¿ƒå¤§å–®ç­–ç•¥

---

### ä¸æ¨è–¦çš„åšæ³• âŒ

#### âŒ é¸é … C: ç›´æ¥è·³åˆ° RL

**å•é¡Œ**:
1. æ²’æœ‰åŸºæº–ç·šå°æ¯”
2. æ•¸æ“šä¸å®Œæ•´ï¼ˆåªæœ‰ 7 å¤©ï¼‰
3. éæ“¬åˆé¢¨éšªæ¥µé«˜
4. èª¿è©¦å›°é›£ï¼Œè€—æ™‚ 2-4 é€±

**çµæœ**: å›æ¸¬è¶…ç¥ï¼Œå¯¦ç›¤æ­¸é›¶

---

#### âŒ é¸é … D: ç¹¼çºŒç”¨ 7 å¤©æ•¸æ“šå„ªåŒ–

**å•é¡Œ**:
1. çµ±è¨ˆç„¡æ„ç¾©ï¼ˆæ¨£æœ¬å¤ªå°ï¼‰
2. Phase 7 çš„ 68% å‹ç‡ä¸å¯ä¿¡
3. è‡ªæ¬ºå¼å„ªåŒ–

**çµæœ**: æµªè²»æ™‚é–“ï¼Œå¯¦ç›¤è™§æ

---

## ğŸ“ éœ€è¦å‰µå»ºçš„æ–‡ä»¶æ¸…å–®

### Week 0: æ•¸æ“šæº–å‚™

```bash
scripts/
â”œâ”€â”€ download_agg_trades_full.py       # ä¸‹è¼‰å®Œæ•´å¤§å–®æ•¸æ“š âœ… æœ€å„ªå…ˆ
â”œâ”€â”€ verify_data_coverage.py           # é©—è­‰æ•¸æ“šå®Œæ•´æ€§ âœ…
â””â”€â”€ merge_large_trades_with_klines.py # åˆä½µåˆ° 15m Kç·š âœ…
```

### Week 1: Time-Series CV æ¡†æ¶

```bash
src/evaluation/
â”œâ”€â”€ timeseries_cv.py                   # CV æ ¸å¿ƒé¡åˆ¥ âœ…
â”œâ”€â”€ param_search.py                    # åƒæ•¸æœç´¢ï¼ˆGrid/Bayesianï¼‰âœ…
â””â”€â”€ cv_reporter.py                     # ç”Ÿæˆè©•ä¼°å ±å‘Š âœ…

scripts/
â”œâ”€â”€ create_timeseries_cv.py            # å‰µå»º CV æ¡†æ¶ âœ…
â”œâ”€â”€ refactor_strategy_for_cv.py        # é‡æ§‹ç¾æœ‰ç­–ç•¥ âœ…
â”œâ”€â”€ run_cv_mvp_v2.py                   # é‹è¡Œ MVP CV âœ…
â”œâ”€â”€ run_cv_large_trade.py              # é‹è¡Œå¤§å–® CV âœ…
â”œâ”€â”€ run_cv_funding.py                  # é‹è¡Œ Funding CV âœ…
â””â”€â”€ compare_cv_results.py              # å°æ¯”çµæœ âœ…
```

### Week 2-3: ML å‹•æ…‹èª¿åƒï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
scripts/
â”œâ”€â”€ extract_ml_training_data.py        # æå–è¨“ç·´æ¨£æœ¬ â³
â”œâ”€â”€ train_dynamic_adjuster.py          # è¨“ç·´ ML æ¨¡å‹ â³
â”œâ”€â”€ validate_ml_model.py               # é©—è­‰æ¨¡å‹ â³
â””â”€â”€ create_ml_enhanced_strategy.py     # æ•´åˆåˆ°ç­–ç•¥ â³
```

### Week 4+: RLï¼ˆæœ€å¾Œæ‰è€ƒæ…®ï¼‰

```bash
scripts/
â”œâ”€â”€ create_rl_meta_env.py              # RL ç’°å¢ƒ â¸ï¸
â”œâ”€â”€ train_rl_meta_controller.py        # è¨“ç·´ RL â¸ï¸
â””â”€â”€ run_cv_rl_meta.py                  # RL CV â¸ï¸
```

---

## âœ… ä¸‹ä¸€æ­¥è¡Œå‹•

**æˆ‘ç¾åœ¨ç«‹å³å¹«ä½ åšçš„ï¼ˆè«‹é¸æ“‡ï¼‰**:

### æ¨è–¦: é¸é … A - ä¸‹è¼‰å®Œæ•´å¤§å–®æ•¸æ“š â­â­â­â­â­

```bash
# æˆ‘æœƒç«‹å³å‰µå»ºä¸¦åŸ·è¡Œ
python scripts/download_agg_trades_full.py \
    --start 2020-01-01 \
    --end 2025-11-15 \
    --min_qty 10.0

# é è¨ˆ 2-3 å°æ™‚å¾Œ
# ä½ å°±æœ‰å®Œæ•´ 2020-2025 å¤§å–®æ•¸æ“š
# ç„¶å¾Œç«‹å³å¯ä»¥é–‹å§‹ Time-Series CV
```

**å„ªé»**:
- âœ… è§£æ±ºæ ¹æœ¬å•é¡Œ
- âœ… ä¸€å‹æ°¸é€¸
- âœ… å¯ä¿¡è³´çš„æ¸¬è©¦çµæœ

---

### å‚™é¸: é¸é … B - å…ˆç”¨ Funding å»ºç«‹ CV æ¡†æ¶

```bash
# å¦‚æœ API å—é™ï¼Œå…ˆç”¨ Fundingï¼ˆå·²æœ‰å®Œæ•´æ•¸æ“šï¼‰
python scripts/create_timeseries_cv.py
python scripts/run_cv_funding_only.py
```

**å„ªé»**:
- âœ… ç«‹å³å¯é–‹å§‹
- âœ… é©—è­‰ CV æ¡†æ¶æ­£ç¢ºæ€§
- âœ… Funding ç­–ç•¥ 2021 æœ‰ 72.6% å‹ç‡

**ç¼ºé»**:
- âš ï¸ 2023-2025 ä¿¡è™Ÿå¤ªå°‘
- âš ï¸ ç„¡æ³•æ¸¬è©¦æ ¸å¿ƒå¤§å–®ç­–ç•¥

---

**è«‹å‘Šè¨´æˆ‘ä½ çš„é¸æ“‡ï¼æˆ‘å¼·çƒˆæ¨è–¦é¸é … Aï¼ˆä¸‹è¼‰å®Œæ•´å¤§å–®æ•¸æ“šï¼‰ï¼Œé€™æ˜¯ä¸€åˆ‡çš„åŸºç¤ï¼** ï¿½
