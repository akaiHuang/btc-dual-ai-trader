# MğŸº 2.0: AI Trap Master å‡ç´šå ±å‘Š

**æ—¥æœŸ**: 2025-11-25  
**ç‰ˆæœ¬**: 2.0 (Trap Master)  
**ç‹€æ…‹**: âœ… å·²å¯¦æ–½

---

## ğŸ¯ å‡ç´šç›®æ¨™

**é¿å…è®Šæˆ MğŸ³ (è¢«å‹•ç­‰å¾…),å­¸ç¿’ MğŸŸ çš„æ¿€é€²åšå¸‚ç­–ç•¥**

### è¨­è¨ˆç†å¿µ
```
èˆŠ MğŸº: è¶¨å‹¢è¿½è¹¤è€… â†’ AI é æ¸¬æ–¹å‘ â†’ è¢«å‹•æ­¢æ â†’ è™§æ
æ–° MğŸº: é™·é˜±åŸ‹ä¼è€… â†’ AI é æ¸¬åè½‰é» â†’ ä¸»å‹•æ­¢ç›ˆ â†’ ç²åˆ©
```

---

## ğŸ“Š å•é¡Œè¨ºæ–·

### èˆŠ MğŸº è™§æåŸå› 
| å•é¡Œ | è¡¨ç¾ | å½±éŸ¿ |
|------|------|------|
| AI é æ¸¬æ»¯å¾Œ | è½å¾Œé¯¨é­š 1-2 é€±æœŸ | é€†å‹¢é–‹å€‰ |
| æ­»æ°´ç›¤é¿å…äº¤æ˜“ | ATR < 0.035% ä¸äº¤æ˜“ | éŒ¯å¤± MğŸŸ çš„è³ºéŒ¢ç’°å¢ƒ |
| è¢«å‹•æ­¢æ | ç­‰è§¸ç™¼æ‰å‡ºå ´ | å¹³å‡ ROI -5.17% |
| åå‘é–‹å€‰ | 30ç§’å…§ä¾†å›æ‰“è‡‰ | é›™é‡è™§æ |

### MğŸŸ æˆåŠŸè¦ç´ 
```
âœ… æ­»æ°´ç›¤è³ºéŒ¢ (ATR < 0.05%)
âœ… å€é–“æ¥µç«¯é»äº¤æ˜“ (range < 0.15 or > 0.85)
âœ… é«˜æ§“æ¡¿å¿«é€²å¿«å‡º (75x, 35ç§’)
âœ… ä¸»å‹•æ­¢ç›ˆ (0.4%, TAKE_PROFIT)
âœ… å‹ç‡ 100% (2/2)
```

---

## ğŸ”¥ MğŸº 2.0 å››å¤§ç­–ç•¥

### ç­–ç•¥ 1: æ­»æ°´ç›¤å€é–“å¥—åˆ© (å­¸ç¿’ MğŸŸ)

**è§¸ç™¼æ¢ä»¶**:
```python
if is_dead_market or atr_pct < 0.05:
    # ä¸é¿å…äº¤æ˜“,åè€Œåˆ©ç”¨ï¼
```

**äº¤æ˜“é‚è¼¯**:
```python
# AI é æ¸¬åè½‰åƒ¹ = å€é–“é‚Šç•Œ
if current_price æ¥è¿‘ whale_reversal_price (0.3% ä»¥å…§):
    if AI_direction == "BEARISH" and price <= reversal_price:
        action = "LONG"  # æŠ„åº•
        leverage = 75x
        take_profit = 0.4%
    elif AI_direction == "BULLISH" and price >= reversal_price:
        action = "SHORT"  # æ‘¸é ‚
        leverage = 75x
        take_profit = 0.4%
```

**å¯¦ä¾‹**:
```
AI é æ¸¬: åè½‰åƒ¹ $86,500 (BEARISH)
ç•¶å‰åƒ¹: $86,450 (è·é›¢ 0.06%)
â†’ MğŸº åœ¨ $86,450 åšå¤š,ç›®æ¨™ $86,800 (0.4% æ­¢ç›ˆ)
```

---

### ç­–ç•¥ 2: ä¸‰é‡ç¢ºèªæ©Ÿåˆ¶

**é¿å…é€†å‹¢é–‹å€‰çš„æ ¸å¿ƒé˜²è­·**

```python
confluence_check = {
    "AI_agrees": AIæ–¹å‘ == äº¤æ˜“æ–¹å‘,
    "Whale_agrees": é¯¨é­šæ–¹å‘ == äº¤æ˜“æ–¹å‘,
    "OBI_agrees": OBI > 0.3 (å¤š) or < -0.3 (ç©º)
}

# éœ€è¦è‡³å°‘ 2/3 ä¸€è‡´æ‰äº¤æ˜“
if confluence_count < 2:
    action = "HOLD"
```

**å¯¦ä¾‹**:
```
æƒ…å¢ƒ A: AI=LONG, Whale=SHORT, OBI=0.5
â†’ åªæœ‰ 1/3 ä¸€è‡´ â†’ HOLD (é¿å…é€†é¯¨é­š)

æƒ…å¢ƒ B: AI=LONG, Whale=LONG, OBI=0.8
â†’ 3/3 å®Œå…¨ä¸€è‡´ â†’ LONG with 65x leverage
```

---

### ç­–ç•¥ 3: åè½‰é»åŸ‹ä¼

**åœ¨é æ¸¬åè½‰åƒ¹é™„è¿‘æå‰åŸ‹ä¼**

```python
if 0.1% < distance_to_reversal < 0.5%:
    if whale_dominance > 0.8:  # é«˜é›†ä¸­åº¦æ‰åŸ‹ä¼
        action = åå‘æ–¼é¯¨é­šæ–¹å‘  # ç­‰å¾…åè½‰
        leverage = 60x
        take_profit = 1.0%
```

**å¯¦ä¾‹**:
```
é¯¨é­šæ–¹å‘: SHORT (é›†ä¸­åº¦ 0.92)
åè½‰åƒ¹: $89,500
ç•¶å‰åƒ¹: $89,300 (è·é›¢ 0.22%)
â†’ MğŸº åœ¨ $89,300 åšå¤š,ç­‰å¾…åè½‰åˆ° $90,195 (1% æ­¢ç›ˆ)
```

---

### ç­–ç•¥ 4: å¿«é€Ÿæ­¢ç›ˆ (ä¸ç­‰æ­¢æ)

**ä¸»å‹•æ­¢ç›ˆ,ä¸ç­‰è¢«å‹•æ­¢æ**

| æ¨¡å¼ | æ¢ä»¶ | æ­¢ç›ˆç›®æ¨™ |
|------|------|---------|
| æ­»æ°´ç›¤åè½‰ | ATR < 0.05% | 0.4% |
| åè½‰åŸ‹ä¼ | è·é›¢åè½‰é» 0.1-0.5% | 1.0% |
| æ¨™æº–ä¿¡è™Ÿ | 3/3 å®Œå…¨ä¸€è‡´ | 0.8% |

**é¡å¤–æ¢ä»¶**: æŒå€‰æ™‚é–“ > 20ç§’ (é¿å…éæ—©å‡ºå ´)

```python
if unrealized_pnl_pct > quick_profit_target and holding_seconds > 20:
    action = "CLOSE"
    reason = f"MğŸº Quick Profit: {pnl_pct:.2f}% in {seconds}s"
```

---

## ğŸ® æ§“æ¡¿å‹•æ…‹èª¿æ•´

| å ´æ™¯ | æ§“æ¡¿ | æ¢ä»¶ |
|------|------|------|
| æ­»æ°´ç›¤å¥—åˆ© | 75x | å­¸ç¿’ MğŸŸ |
| 3/3 å®Œå…¨ä¸€è‡´ + é«˜é›†ä¸­åº¦ | 65x | whale_dominance > 0.8 |
| åè½‰åŸ‹ä¼ | 60x | ä¸­é«˜é¢¨éšª |
| 2/3 ä¸€è‡´ | 30-55x | åŸºæ–¼ confidence |
| æ¨™æº–ä¿¡è™Ÿ | 30-55x | min(55, confidence * 0.8) |

---

## ğŸ“Š å°æ¯”æ–°èˆŠ MğŸº

| ç¶­åº¦ | èˆŠ MğŸº | æ–° MğŸº 2.0 | æ”¹é€² |
|------|--------|------------|------|
| **æ­»æ°´ç›¤ç­–ç•¥** | âŒ é¿å…äº¤æ˜“ | âœ… å€é–“å¥—åˆ© | å­¸ç¿’ MğŸŸ |
| **æ§“æ¡¿** | 37x | 60-75x | +65% |
| **æ­¢ç›ˆé‚è¼¯** | âŒ è¢«å‹•æ­¢æ | âœ… ä¸»å‹•æ­¢ç›ˆ | å¿«é€Ÿæ­¢ç›ˆ |
| **é€²å ´æ¢ä»¶** | AI ä¿¡è™Ÿ | AI + é¯¨é­š + OBI | ä¸‰é‡ç¢ºèª |
| **æŒå€‰æ™‚é–“** | 48ç§’ (è¢«å‹•) | 20-60ç§’ (ä¸»å‹•) | å¿«é€²å¿«å‡º |
| **è§’è‰²å®šä½** | è¶¨å‹¢è¿½è¹¤è€… | é™·é˜±åŸ‹ä¼è€… | ä¸»å‹•åšå¸‚ |
| **æˆåŠŸç‡** | 0% (0/8) | å¾…æ¸¬è©¦ | ç›®æ¨™ >60% |

---

## ğŸ’» ç¨‹å¼ç¢¼ä¿®æ”¹

### 1. é‡æ§‹ M_AI_WHALE_HUNTER æ±ºç­–é‚è¼¯
**ä½ç½®**: `scripts/paper_trading_hybrid_full.py` Line 2839  
**ä¿®æ”¹**: å¾ 130 è¡Œé‡æ§‹ç‚º 200+ è¡Œ,æ–°å¢å››å¤§ç­–ç•¥

**æ–°å¢é‚è¼¯**:
```python
# ç­–ç•¥ 1: æ­»æ°´ç›¤å¥—åˆ©
if is_dead_market or atr_pct < 0.05:
    if at_reversal_point:
        action = åå‘é–‹å€‰
        leverage = 75x

# ç­–ç•¥ 2: ä¸‰é‡ç¢ºèª
confluence_count = AI + Whale + OBI
if confluence_count < 2:
    return HOLD

# ç­–ç•¥ 3: åè½‰åŸ‹ä¼
if near_reversal_point and high_dominance:
    action = åå‘æ–¼é¯¨é­š
    leverage = 60x

# ç­–ç•¥ 4: æ¨™æº–ä¿¡è™Ÿ (é«˜ç¢ºå®šæ€§)
if confluence_count == 3:
    leverage = 65x
```

### 2. æ–°å¢å¿«é€Ÿæ­¢ç›ˆå‡ºå ´é‚è¼¯
**ä½ç½®**: `scripts/paper_trading_hybrid_full.py` Line 3920  
**ä¿®æ”¹**: æ“´å±• M_AI_WHALE_HUNTER å‡ºå ´æª¢æŸ¥

**æ–°å¢é‚è¼¯**:
```python
# 1. å¿«é€Ÿæ­¢ç›ˆ (0.4-1.0%)
if pnl_pct > quick_profit_target and holding_seconds > 20:
    close_position()

# 2. æ­»æ°´ç›¤å¿«é€Ÿæ­¢ç›ˆ (0.4%)
if trap_mode == 'dead_market_reversal' and pnl_pct > 0.4:
    close_position()

# 3. åŸ‹ä¼æˆåŠŸæ­¢ç›ˆ (1.0%)
if trap_mode == 'reversal_ambush' and pnl_pct > 1.0:
    close_position()
```

---

## ğŸ§ª æ¸¬è©¦é©—è­‰

### å•Ÿå‹•æ–° MğŸº
```bash
# é‡å•Ÿç³»çµ±
pkill -f ai_trading_advisor.py && pkill -f start_trading_bot.py
.venv/bin/python scripts/ai_trading_advisor.py &
sleep 5
.venv/bin/python start_trading_bot.py 8 &
```

### è§€å¯ŸæŒ‡æ¨™
```bash
# 1. æª¢æŸ¥æ±ºç­–é‚è¼¯
tail -f data/paper_trading/pt_*/signal_diagnostics.csv | grep M_AI_WHALE_HUNTER

# 2. æŸ¥çœ‹äº¤æ˜“è¨˜éŒ„
cat data/paper_trading/pt_*/trading_data.json | jq '.orders.M_AI_WHALE_HUNTER'

# 3. ç›£æ§ Bridge
watch -n 5 cat ai_wolf_bridge.json
```

### æˆåŠŸæŒ‡æ¨™
- [ ] æ­»æ°´ç›¤æœ‰äº¤æ˜“ (ATR < 0.05%)
- [ ] å¿«é€Ÿæ­¢ç›ˆè§¸ç™¼ (æŒå€‰ < 60ç§’)
- [ ] ä¸‰é‡ç¢ºèªé‹ä½œ (confluence log)
- [ ] å‹ç‡ > 60%
- [ ] å¹³å‡ ROI > 0%

---

## ğŸ“ˆ é æœŸæ•ˆæœ

### å ´æ™¯ A: æ­»æ°´ç›¤ (ATR 0.001%)
```
èˆŠ MğŸº: HOLD (é¿å…äº¤æ˜“) â†’ $0 PnL
æ–° MğŸº: åœ¨åè½‰é»å¥—åˆ© â†’ +0.4% (å¿«é€Ÿæ­¢ç›ˆ)
```

### å ´æ™¯ B: é¯¨é­šåè½‰
```
èˆŠ MğŸº: é€†é¯¨é­šé–‹å€‰ â†’ æ­¢æ -5%
æ–° MğŸº: 2/3 ä¸€è‡´æª¢æŸ¥ â†’ HOLD (é¿å…è™§æ)
```

### å ´æ™¯ C: é«˜ç¢ºå®šæ€§ä¿¡è™Ÿ
```
èˆŠ MğŸº: 37x æ§“æ¡¿ â†’ è¢«å‹•æ­¢æ
æ–° MğŸº: 65x æ§“æ¡¿ â†’ å¿«é€Ÿæ­¢ç›ˆ 0.8%
```

---

## ğŸš¨ é¢¨éšªç®¡ç†

### æ§“æ¡¿é¢¨éšª
- 75x é«˜æ§“æ¡¿åƒ…ç”¨æ–¼æ­»æ°´ç›¤ (æ³¢å‹•æ¥µä½)
- æ¨™æº–æ§“æ¡¿ 30-55x (åŸºæ–¼ confidence)
- æœ€é«˜ 65x (éœ€ 3/3 ä¸€è‡´ + é«˜é›†ä¸­åº¦)

### æ­¢æé˜²è­·
- ä¿ç•™åŸæœ‰æ­¢ææ©Ÿåˆ¶ (1-2%)
- å¿«é€Ÿæ­¢ç›ˆå„ªå…ˆè§¸ç™¼
- AI CUT_LOSS å¼·åˆ¶å¹³å€‰

### é »ç‡æ§åˆ¶
- ä¸‰é‡ç¢ºèªé¿å…éåº¦äº¤æ˜“
- æ­»æ°´ç›¤åªåœ¨åè½‰é»äº¤æ˜“
- åŸ‹ä¼æ¨¡å¼éœ€é«˜é›†ä¸­åº¦ (>0.8)

---

## ğŸ“ TODO

### Phase 1 (ç«‹å³)
- [x] å¯¦æ–½å››å¤§ç­–ç•¥
- [x] å¿«é€Ÿæ­¢ç›ˆé‚è¼¯
- [x] èªæ³•æª¢æŸ¥é€šé
- [ ] é‡å•Ÿç³»çµ±æ¸¬è©¦
- [ ] è§€å¯Ÿ 1 å°æ™‚æ•¸æ“š

### Phase 2 (å„ªåŒ–)
- [ ] èª¿æ•´ quick_profit_target (0.4-1.0%)
- [ ] å„ªåŒ–ä¸‰é‡ç¢ºèªé–€æª»
- [ ] åå‘é–‹å€‰å†·å»æœŸ (é¿å…ä¾†å›æ‰“è‡‰)
- [ ] è¨˜éŒ„å„ç­–ç•¥å‹ç‡

### Phase 3 (é€²éš)
- [ ] å¤šæ™‚é–“æ¡†æ¶åè½‰é»ç¢ºèª
- [ ] å‹•æ…‹èª¿æ•´æ§“æ¡¿ (åŸºæ–¼æ­·å²å‹ç‡)
- [ ] æƒ…ç·’æŒ‡æ¨™æ•´åˆ (ææ…Œ/è²ªå©ª)

---

## ğŸ¯ æ ¸å¿ƒå·®ç•°ç¸½çµ

**MğŸ³**: è¢«å‹•ç­‰é¯¨é­š â†’ è·Ÿéš¨  
**MğŸŸ**: æ­»æ°´ç›¤åšå¸‚ â†’ å¿«é€²å¿«å‡º  
**MğŸº 2.0**: AI é æ¸¬é™·é˜±é» â†’ ä¸»å‹•åŸ‹ä¼

**é—œéµå‰µæ–°**: 
1. æ­»æ°´ç›¤ä¸é¿å…,åè€Œåˆ©ç”¨
2. é«˜æ§“æ¡¿ + å¿«é€Ÿæ­¢ç›ˆ (å­¸ç¿’ MğŸŸ)
3. ä¸‰é‡ç¢ºèªé¿å…é€†å‹¢
4. ä¸»å‹•æ­¢ç›ˆ,ä¸ç­‰æ­¢æ

---

**ä½œè€…**: GitHub Copilot  
**æ¸¬è©¦ç‹€æ…‹**: å¾…é©—è­‰  
**é æœŸå‹ç‡**: >60%
